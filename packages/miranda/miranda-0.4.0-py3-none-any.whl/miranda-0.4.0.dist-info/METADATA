Metadata-Version: 2.1
Name: miranda
Version: 0.4.0
Summary: Python utilities for climate data collection and management
Home-page: https://github.com/Ouranosinc/miranda
Author: Trevor James Smith
Author-email: smith.trevorj@ouranos.ca
License: Apache Software License 2.0
Project-URL: About Ouranos, https://www.ouranos.ca/en/
Project-URL: Changelog, https://miranda.readthedocs.io/en/stable/history.html
Project-URL: Issue tracker, https://github.com/Ouranosinc/miranda/issues
Keywords: climate meteorology archiving collection NetCDF
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Natural Language :: English
Classifier: Operating System :: MacOS
Classifier: Operating System :: POSIX
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Topic :: Scientific/Engineering :: Atmospheric Science
Description-Content-Type: text/x-rst
License-File: LICENSE
License-File: AUTHORS.rst
Requires-Dist: cftime
Requires-Dist: clisops
Requires-Dist: dask
Requires-Dist: fiona
Requires-Dist: geojson
Requires-Dist: h5netcdf
Requires-Dist: netCDF4
Requires-Dist: numpy
Requires-Dist: geopandas
Requires-Dist: pandas
Requires-Dist: pint
Requires-Dist: pyessv
Requires-Dist: pyproj
Requires-Dist: pyyaml
Requires-Dist: rasterio
Requires-Dist: regionmask
Requires-Dist: schema
Requires-Dist: shapely
Requires-Dist: xarray
Requires-Dist: xclim
Requires-Dist: zarr
Provides-Extra: dev
Requires-Dist: autopep8 ; extra == 'dev'
Requires-Dist: black ; extra == 'dev'
Requires-Dist: bump2version ; extra == 'dev'
Requires-Dist: coverage ; extra == 'dev'
Requires-Dist: flake8 ; extra == 'dev'
Requires-Dist: furo ; extra == 'dev'
Requires-Dist: ipython ; extra == 'dev'
Requires-Dist: nbsphinx ; extra == 'dev'
Requires-Dist: pandoc ; extra == 'dev'
Requires-Dist: pre-commit ; extra == 'dev'
Requires-Dist: pytest ; extra == 'dev'
Requires-Dist: pyupgrade ; extra == 'dev'
Requires-Dist: sphinx ; extra == 'dev'
Requires-Dist: sphinx-codeautolink ; extra == 'dev'
Requires-Dist: sphinx-copybutton ; extra == 'dev'
Requires-Dist: tox ; extra == 'dev'
Requires-Dist: wheel ; extra == 'dev'
Requires-Dist: cdsapi ; extra == 'dev'
Requires-Dist: distributed ; extra == 'dev'
Requires-Dist: ecmwf-api-client ; extra == 'dev'
Requires-Dist: fabric ; extra == 'dev'
Requires-Dist: intake ; extra == 'dev'
Requires-Dist: intake-esm ; extra == 'dev'
Requires-Dist: numcodecs ; extra == 'dev'
Requires-Dist: paramiko (>=2.6.0) ; extra == 'dev'
Requires-Dist: s3fs ; extra == 'dev'
Requires-Dist: scp ; extra == 'dev'
Provides-Extra: docs
Requires-Dist: furo ; extra == 'docs'
Requires-Dist: ipython ; extra == 'docs'
Requires-Dist: nbsphinx ; extra == 'docs'
Requires-Dist: pandoc ; extra == 'docs'
Requires-Dist: sphinx ; extra == 'docs'
Requires-Dist: sphinx-codeautolink ; extra == 'docs'
Requires-Dist: sphinx-copybutton ; extra == 'docs'
Provides-Extra: remote
Requires-Dist: cdsapi ; extra == 'remote'
Requires-Dist: distributed ; extra == 'remote'
Requires-Dist: ecmwf-api-client ; extra == 'remote'
Requires-Dist: fabric ; extra == 'remote'
Requires-Dist: intake ; extra == 'remote'
Requires-Dist: intake-esm ; extra == 'remote'
Requires-Dist: numcodecs ; extra == 'remote'
Requires-Dist: paramiko (>=2.6.0) ; extra == 'remote'
Requires-Dist: s3fs ; extra == 'remote'
Requires-Dist: scp ; extra == 'remote'

==============
Miranda |logo|
==============

|build| |coveralls| |black|

Python utilities for climate data collection, conversion, and management

* Documentation: |docs|
* Free Software: |license|

Features
--------

Data collection functions for climate and forecast data hosted at:
    * ECMWF (ERA5, ERA5-Land, TIGGE)
    * ECCC (Canada) (Monthly Climate Summaries, ECCC GEOAPI - In development)
    * NCAR (CORDEX-NA on AWS)

Data conversion for `Climate and Forecasting (CF) <https://cfconventions.org/>`_ Variable and Metadata compliance:
    * ECMWF (ERA5, ERA5-Land, TIGGE - In Development)
    * ECCC (Canada) (Flat File Observations, Monthly Climate Summaries, Adjusted and Homogenized Climate Data, ECCC GEOAPI - In Development)
    * MELCC (Québec)
    * Hydro-Québec (In Development)

Database structuring and facets validation:
    * Simulations:
       * WCRP (CMIP5, CMIP6, CMIP5-CORDEX, CORDEX-ADJUST, ISIMIP, etc.)
    * Station-Observations:
       * MELCC (Québec) (Needs `mdbtools <https://github.com/mdbtools/mdbtools>`_ installed)
       * ECCC (Canada) (In Development)
       * Hydro-Québec (In Development)
    * Gridded-Observations:
       * NRCAN (Canada) (Future)
       * MELCC (Future)
    * Reanalyses:
       * ECMWF (ERA5, ERA5-Land, TIGGE)
       * NASA (DayMET, AgMerra/AgCFSR, MERRA2) - In Development
       * NCEP (CFSR/CFSv2) - In Development
       * WFDEI-GEM-CaPa (University of Saskatchewan) - In Development

Installation
------------
`miranda` can be installed from PyPI::

    $ pip install miranda

Some functionalities require complex-to-install dependencies.
In order to gain access to them, we strongly suggest using `Anaconda <https://www.anaconda.com/products/distribution>`_ to manage your environment::

    $ conda env create -f environment.yml
    $ conda activate miranda
    $ pip install miranda[full]

For more information about Anaconda/Miniconda/conda-forge:
 * Miniconda: https://docs.conda.io/en/latest/miniconda.html
 * conda-forge: https://conda-forge.org/#about

`miranda` also relies on `PyESSV <https://github.com/ES-DOC/pyessv>`_ for its climate data controlled vocabulary.
This library is optional for users who do not require validation checks,
but enabling this feature requires additional installation steps::


    $ mkdir -p ~/.esdoc
    $ git clone git@github.com:ES-DOC/pyessv-archive.git ~/.esdoc/pyessv-archive

Contributing
------------
See the contributing documentation: https://miranda.readthedocs.io/en/latest/contributing.html

.. |build| image:: https://github.com/Ouranosinc/miranda/actions/workflows/main.yml/badge.svg
        :target: https://github.com/Ouranosinc/miranda/actions/workflows/main.yml
        :alt: Build Status

.. |coveralls| image:: https://coveralls.io/repos/github/Ouranosinc/miranda/badge.svg
        :target: https://coveralls.io/github/Ouranosinc/miranda
        :alt: Coveralls

.. |docs| image:: https://readthedocs.org/projects/miranda/badge
        :target: https://miranda.readthedocs.io/en/latest
        :alt: Documentation Status

.. |license| image:: https://img.shields.io/github/license/Ouranosinc/miranda.svg
        :target: https://github.com/Ouranosinc/miranda/blob/master/LICENSE
        :alt: License

.. |black| image:: https://img.shields.io/badge/code%20style-black-000000.svg
        :target: https://github.com/psf/black
        :alt: Python Black

.. |logo| image:: https://raw.githubusercontent.com/Ouranosinc/miranda/main/docs/_static/images/miranda-logo-small.png
        :target: https://github.com/Ouranosinc/miranda
        :alt: Miranda



Documentation
-------------

The full documentation is at https://miranda.readthedocs.io/en/latest.



=======
History
=======

v0.4.0 (2023-03-30)
-------------------
Contributors to this version: Trevor James Smith (`@Zeitsperre <https://github.com/Zeitsperre>`_), Pascal Bourgault (`@aulemahal <https://github.com/aulemahal>`_), Travis Logan (`@tlogan2000 <https://github.com/tlogan2000>`_).

New features
^^^^^^^^^^^^
* Improvements have been made to the development documentation; Project URLs, ReadTheDocs theming, and other quality of life changes.
* Conversion JSON definitions now support pre-processing to render dimensions and variable names consistent before running corrections/conversions.
* New datasets with CF-like attributes conversion supported:
    - RDRS (ECCC)
    - GRNCH (ETS)
* Preliminary ``miranda.io`` module for organizing output-writing functionality.
* New ``miranda.io.fetch_chunk_config`` function for "rechunking" datasets according to project presets.
* New ``mirands.io.utils.name_output_file`` for generating names from Dataset facets or from a dictionary.
* New ``mirands.gis.subset_domain`` for clipping dataset to a preconfigured region.

Bug fixes
^^^^^^^^^
* Many data-related utilities now have more accurate static typing.
* Converted dataset global attributes are now synchronized for consistency.
* ECMWF-based datasets now implement more consistent conversion factors and metadata.
* ``miranda.storage.file_size`` now handles dictionaries of Pathlib objects.

Internal changes
^^^^^^^^^^^^^^^^
* Pre-commit version updates.
* Improvements have been made to the development documentation; Project URLs, ReadTheDocs theming, installation methods, and other quality of life changes.
* Schema and folder structure updates:
    - `gridded-obs` -> `reconstruction`
    - `bias-adjust-project` is used when present and not just when `level=="biasadjusted"`
* CI now using `tox>=4.0` and `ubuntu-latest` virtual machine images.

v0.3.0 (2022-11-24)
-------------------
Contributors to this version: Trevor James Smith (`@Zeitsperre <https://github.com/Zeitsperre>`_), Pascal Bourgault (`@aulemahal <https://github.com/aulemahal>`_), David Huard (`@huard <https://github.com/huard>`_), Travis Logan (`@tlogan2000 <https://github.com/tlogan2000>`_), Gabriel Rondeau-Genesse (`@RondeauG <https://github.com/RondeauG>`_), and Sébastien Biner (`@sbiner <https://github.com/sbiner>`_).

Announcements
^^^^^^^^^^^^^
* First public release on PyPI.

New features
^^^^^^^^^^^^
* Dataset conversion tools (``miranda.convert``) use a JSON-definition file to dynamically populate metadata, run data quality checks, and convert units to CF-compliant standard. Supported datasets are:
    - ERA5/ERA5-Land (complete)
    - MELCC (stations) (beta)
    - ECCC (stations) (alpha)
    - NASA DayMet (WIP)
    - NASA AgMerra/AgCFSR (WIP)
    - Hydro Québec (stations) (WIP)
    - DEH (stations) (WIP)
    - WFDEI-GEM-CAPA (WIP)
* Module (``miranda.eccc``) for ECCC station data and ECCC Adjusted and Homogenized Canadian Climate Data (AHCCD) conversion (WIP).
* Module (``miranda.ncar``) for fetching interpolated CORDEX-NAM (22i/44i) from NCAR AWS data storage.
* Module (``miranda.ecmwf``) for fetching ECMWF ERA5/-Land (single-levels, pressure-levels, monthly-means) datasets via CDSAPI.
* Module (``miranda.gis``) for setting specific subsetting domains used when converting gridded datasets.
* Modules (``miranda.archive`` and ``miranda.remote``) for performing data archiving actions locally and remotely (powered by `fabric <https://github.com/fabric/fabric>`_ and `paramiko <https://github.com/paramiko/paramiko>`_) (WIP).
* Module (``miranda.decode``) for ingesting and parsing dataset metadata based on filename and dataset attributes. Supported datasets are:
    - `miranda` converted datasets
    - CMIP6
    - CMIP5
    - CMIP5-CORDEX
    - ISIMIP-FT
    - CanDCS-U6 (PCIC)
* Module (``miranda.structure``) for create constructing file-tree databases based on YAML-defined metadata schemas (WIP).
* Modules (``miranda.cv`` and ``miranda.validators``) for validating metadata using ESGF controlled vocabularies (taken from `pyessv-archive <https://github.com/ES-DOC/pyessv-archive>`_) and schema definitions (powered by `schema <https://github.com/keleshev/schema>`_), respectively (WIP).
