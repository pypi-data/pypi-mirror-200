import{a as C,k as x,aD as A,M as P,c as t,ac as m,u as e,b as u,w as n,h as k,e as D,A as w,o as p,l as F,b2 as M,b3 as N,b4 as V,b5 as q,b6 as H,aA as f,b7 as R,W}from"./index-46ac39cf.js";import{u as Y}from"./usePageTitle-c7478bfe.js";const E=C({__name:"BlocksCatalogCreate",setup($){const l=x(),s=w(),b=A("redirect"),i=P("blockTypeSlug"),y=t(()=>i.value?[i.value]:null),d=m(l.blockTypes.getBlockTypeBySlug,y),c=t(()=>d.response),h=t(()=>c.value?[c.value.id]:null),_=m(l.blockSchemas.getBlockSchemaForBlockType,h),r=t(()=>_.response);function S(a){l.blockDocuments.createBlockDocument(a).then(({id:o})=>B(o)).catch(o=>{f("Failed to create block","error"),console.error(o)})}function g(){s.back()}function B(a){if(f("Block created successfully","success"),b.value){const o=s.resolve(R(b.value));s.push(o);return}s.push(W.block(a))}const v=t(()=>c.value?`Create ${c.value.name} Block`:"Create Block");return Y(v),(a,o)=>{const T=D("p-layout-default");return e(c)?(p(),u(T,{key:0,class:"blocks-catalog-create"},{header:n(()=>[F(e(M),{"block-type":e(c)},null,8,["block-type"])]),default:n(()=>[e(c)?(p(),u(e(N),{key:0,"block-type":e(c)},{default:n(()=>[e(r)?(p(),u(e(V),q({key:e(r).id,"block-schema":e(r)},H({submit:S,cancel:g})),null,16,["block-schema"])):k("",!0)]),_:1},8,["block-type"])):k("",!0)]),_:1})):k("",!0)}}});export{E as default};
