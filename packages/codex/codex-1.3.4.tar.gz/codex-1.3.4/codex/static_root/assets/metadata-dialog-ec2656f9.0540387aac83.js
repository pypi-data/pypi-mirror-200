import{c as O,o as m,e as M,aB as we,r as re,w as V,aC as Te,aD as Q,au as xe,c1 as Ue,c2 as je,c3 as Ge,S as He,c4 as D,bL as h,c5 as be,ae as ee,c6 as Ke,c7 as We,c8 as ge,N as ce,c9 as Ye,ad as Ve,ca as Qe,T as me,cb as W,cc as Xe,g as l,be as ye,bf as Je,cd as Ze,bh as et,ce as tt,cf as at,cg as ke,ch as lt,bH as st,bd as nt,ci as ot,bN as rt,F as ve,bO as it,bQ as ut,as as ne,J as dt,G as ct,cj as mt,a as J,M as Z,d as P,ck as vt,ao as he,f as N,t as F,cl as ht,j as d,cm as ft,cn as pt,y as _t,k as Y,E as oe,ay as bt,q as Me,v as Pe,I as gt,co as yt,_ as Ie,bB as kt,cp as St,B as Ct,C as wt,b6 as Tt,bE as Vt,b4 as Mt,b5 as Pt,cq as It,a$ as de,b as Se,K as Bt,a_ as Nt,b2 as Rt,l as Lt,az as Ft,D as $t}from"./admin-05b93a12.js";const Et={name:"PaginationToolbar"};function Dt(e,t,a,i,r,n){return m(),M(xe,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},we({_:2},[re(e.$slots,(u,s)=>({name:s,fn:V(c=>[Te(e.$slots,s,Q({props:u},c),void 0,!0)])}))]),1024)}const Za=O(Et,[["render",Dt],["__scopeId","data-v-cfa8cce0"]]);const fe=Symbol.for("vuetify:v-slider");function zt(e,t,a){const i=a==="vertical",r=t.getBoundingClientRect(),n="touches"in e?e.touches[0]:e;return i?n.clientY-(r.top+r.height/2):n.clientX-(r.left+r.width/2)}function At(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const Ot=Ue({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...je(),...Ge({elevation:2})},"slider"),qt=e=>{let{props:t,handleSliderMouseUp:a,handleMouseMove:i,getActiveThumb:r}=e;const{isRtl:n}=He(),u=D(t,"reverse"),s=h(()=>{let o=n.value?"rtl":"ltr";return t.reverse&&(o=o==="rtl"?"ltr":"rtl"),o}),c=h(()=>parseFloat(t.min)),v=h(()=>parseFloat(t.max)),g=h(()=>t.step>0?parseFloat(t.step):0),R=h(()=>Math.max(be(g.value),be(c.value))),S=h(()=>parseInt(t.thumbSize,10)),I=h(()=>parseInt(t.tickSize,10)),w=h(()=>parseInt(t.trackSize,10)),B=h(()=>(v.value-c.value)/g.value),G=D(t,"disabled"),H=h(()=>t.direction==="vertical"),z=h(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),f=h(()=>t.error||t.disabled?void 0:t.trackColor??t.color),q=h(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),L=ee(!1),b=ee(0),T=ee(),y=ee();function $(o){if(g.value<=0)return o;const p=ge(o,c.value,v.value),se=c.value%g.value,ie=Math.round((p-se)/g.value)*g.value+se;return parseFloat(Math.min(ie,v.value).toFixed(R.value))}function A(o){var _e;const p=t.direction==="vertical",se=p?"top":"left",ie=p?"height":"width",ze=p?"clientY":"clientX",{[se]:Ae,[ie]:Oe}=(_e=T.value)==null?void 0:_e.$el.getBoundingClientRect(),qe=At(o,ze);let ue=Math.min(Math.max((qe-Ae-b.value)/Oe,0),1)||0;return(p||s.value==="rtl")&&(ue=1-ue),$(c.value+ue*(v.value-c.value))}let E=!1;const k=o=>{E||(b.value=0,a(A(o))),L.value=!1,E=!1,b.value=0},X=o=>{y.value=r(o),y.value&&(y.value.focus(),L.value=!0,y.value.contains(o.target)?(E=!0,b.value=zt(o,y.value,t.direction)):(b.value=0,i(A(o))))},x={passive:!0,capture:!0};function U(o){E=!0,i(A(o))}function _(o){o.stopPropagation(),o.preventDefault(),k(o),window.removeEventListener("mousemove",U,x),window.removeEventListener("mouseup",_)}function C(o){var p;k(o),window.removeEventListener("touchmove",U,x),(p=o.target)==null||p.removeEventListener("touchend",C)}function j(o){var p;X(o),window.addEventListener("touchmove",U,x),(p=o.target)==null||p.addEventListener("touchend",C,{passive:!1})}function te(o){o.preventDefault(),X(o),window.addEventListener("mousemove",U,x),window.addEventListener("mouseup",_,{passive:!1})}const K=o=>{const p=(o-c.value)/(v.value-c.value)*100;return ge(isNaN(p)?0:p,0,100)},ae=D(t,"showTicks"),le=h(()=>ae.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(o=>({value:o,position:K(o),label:o.toString()})):Object.keys(t.ticks).map(o=>({value:parseFloat(o),position:K(parseFloat(o)),label:t.ticks[o]})):B.value!==1/0?Ke(B.value+1).map(o=>{const p=c.value+o*g.value;return{value:p,position:K(p)}}):[]:[]),De=h(()=>le.value.some(o=>{let{label:p}=o;return!!p})),pe={activeThumbRef:y,color:D(t,"color"),decimals:R,disabled:G,direction:D(t,"direction"),elevation:D(t,"elevation"),hasLabels:De,horizontalDirection:s,isReversed:u,min:c,max:v,mousePressed:L,numTicks:B,onSliderMousedown:te,onSliderTouchstart:j,parsedTicks:le,parseMouseMove:A,position:K,readonly:D(t,"readonly"),rounded:D(t,"rounded"),roundValue:$,showTicks:ae,startOffset:b,step:g,thumbSize:S,thumbColor:z,thumbLabel:D(t,"thumbLabel"),ticks:D(t,"ticks"),tickSize:I,trackColor:f,trackContainerRef:T,trackFillColor:q,trackSize:w,vertical:H};return We(fe,pe),pe},xt=ce()({name:"VSliderThumb",directives:{Ripple:Ye},props:{focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:Boolean,default:!0}},emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:i}=t;const r=Ve(fe);if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:n,step:u,vertical:s,disabled:c,thumbSize:v,thumbLabel:g,direction:R,readonly:S,elevation:I,isReversed:w,horizontalDirection:B,mousePressed:G,decimals:H}=r,{textColorClasses:z,textColorStyles:f}=Qe(n),{pageup:q,pagedown:L,end:b,home:T,left:y,right:$,down:A,up:E}=tt,k=[q,L,b,T,y,$,A,E],X=h(()=>u.value?[1,2,3]:[1,5,10]);function x(_,C){if(!k.includes(_.key))return;_.preventDefault();const j=u.value||.1,te=(e.max-e.min)/j;if([y,$,A,E].includes(_.key)){const ae=(B.value==="rtl"?[y,E]:[$,E]).includes(_.key)?1:-1,le=_.shiftKey?2:_.ctrlKey?1:0;C=C+ae*j*X.value[le]}else if(_.key===T)C=e.min;else if(_.key===b)C=e.max;else{const K=_.key===L?1:-1;C=C-K*j*(te>100?te/10:10)}return Math.max(e.min,Math.min(e.max,C))}function U(_){const C=x(_,e.modelValue);C!=null&&i("update:modelValue",C)}return me(()=>{const _=W(s.value||w.value?100-e.position:e.position,"%"),{elevationClasses:C}=Xe(h(()=>c.value?void 0:I.value));return l("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&G.value}],style:{"--v-slider-thumb-position":_,"--v-slider-thumb-size":W(v.value)},role:"slider",tabindex:c.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":S.value,"aria-orientation":R.value,onKeydown:S.value?void 0:U},[l("div",{class:["v-slider-thumb__surface",z.value,C.value],style:{...f.value}},null),ye(l("div",{class:["v-slider-thumb__ripple",z.value],style:f.value},null),[[Je("ripple"),e.ripple,null,{circle:!0,center:!0}]]),l(Ze,{origin:"bottom center"},{default:()=>{var j;return[ye(l("div",{class:"v-slider-thumb__label-container"},[l("div",{class:["v-slider-thumb__label"]},[l("div",null,[((j=a["thumb-label"])==null?void 0:j.call(a,{modelValue:e.modelValue}))??e.modelValue.toFixed(u.value?H.value:1)])])]),[[et,g.value&&e.focused||g.value==="always"]])]}})])}),{}}});const Ut=ce()({name:"VSliderTrack",props:{start:{type:Number,required:!0},stop:{type:Number,required:!0}},emits:{},setup(e,t){let{slots:a}=t;const i=Ve(fe);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,horizontalDirection:n,parsedTicks:u,rounded:s,showTicks:c,tickSize:v,trackColor:g,trackFillColor:R,trackSize:S,vertical:I,min:w,max:B}=i,{roundedClasses:G}=at(s),{backgroundColorClasses:H,backgroundColorStyles:z}=ke(R),{backgroundColorClasses:f,backgroundColorStyles:q}=ke(g),L=h(()=>`inset-${I.value?"block-end":"inline-start"}`),b=h(()=>I.value?"height":"width"),T=h(()=>({[L.value]:"0%",[b.value]:"100%"})),y=h(()=>e.stop-e.start),$=h(()=>({[L.value]:W(e.start,"%"),[b.value]:W(y.value,"%")})),A=h(()=>c.value?(I.value?u.value.slice().reverse():u.value).map((k,X)=>{var _;const x=I.value?"bottom":"margin-inline-start",U=k.value!==w.value&&k.value!==B.value?W(k.position,"%"):void 0;return l("div",{key:k.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":k.position>=e.start&&k.position<=e.stop,"v-slider-track__tick--first":k.value===w.value,"v-slider-track__tick--last":k.value===B.value}],style:{[x]:U}},[(k.label||a["tick-label"])&&l("div",{class:"v-slider-track__tick-label"},[((_=a["tick-label"])==null?void 0:_.call(a,{tick:k,index:X}))??k.label])])}):[]);return me(()=>l("div",{class:["v-slider-track",G.value],style:{"--v-slider-track-size":W(S.value),"--v-slider-tick-size":W(v.value),direction:I.value?void 0:n.value}},[l("div",{class:["v-slider-track__background",f.value,{"v-slider-track__background--opacity":!!r.value||!R.value}],style:{...T.value,...q.value}},null),l("div",{class:["v-slider-track__fill",H.value],style:{...$.value,...z.value}},null),c.value&&l("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":c.value==="always"}]},[A.value])])),{}}}),jt=ce()({name:"VSlider",props:{...lt(),...Ot(),...st(),modelValue:{type:[Number,String],default:0}},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const i=ee(),{min:r,max:n,mousePressed:u,roundValue:s,onSliderMousedown:c,onSliderTouchstart:v,trackContainerRef:g,position:R,hasLabels:S,readonly:I}=qt({props:e,handleSliderMouseUp:f=>w.value=s(f),handleMouseMove:f=>w.value=s(f),getActiveThumb:()=>{var f;return(f=i.value)==null?void 0:f.$el}}),w=nt(e,"modelValue",void 0,f=>{const q=typeof f=="string"?parseFloat(f):f??r.value;return s(q)}),{isFocused:B,focus:G,blur:H}=ot(e),z=h(()=>R(w.value));return me(()=>{const[f,q]=rt(e),L=!!(e.label||a.label||a.prepend);return l(ut,Q({class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||S.value,"v-slider--focused":B.value,"v-slider--pressed":u.value,"v-slider--disabled":e.disabled}]},f,{focused:B.value}),{...a,prepend:L?b=>{var T,y;return l(ve,null,[((T=a.label)==null?void 0:T.call(a,b))??e.label?l(it,{id:b.id,class:"v-slider__label",text:e.label},null):void 0,(y=a.prepend)==null?void 0:y.call(a,b)])}:void 0,default:b=>{let{id:T,messagesId:y}=b;return l("div",{class:"v-slider__container",onMousedown:I.value?void 0:c,onTouchstartPassive:I.value?void 0:v},[l("input",{id:T.value,name:e.name||T.value,disabled:e.disabled,readonly:e.readonly,tabindex:"-1",value:w.value},null),l(Ut,{ref:g,start:0,stop:z.value},{"tick-label":a["tick-label"]}),l(xt,{ref:i,"aria-describedby":y.value,focused:B.value,min:r.value,max:n.value,modelValue:w.value,"onUpdate:modelValue":$=>w.value=$,position:z.value,elevation:e.elevation,onFocus:G,onBlur:H},{"thumb-label":a["thumb-label"]})])}})}),{}}}),Gt={name:"PaginationSlider"};function Ht(e,t,a,i,r,n){return m(),M(jt,Q({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),null,16)}const el=O(Gt,[["render",Ht],["__scopeId","data-v-825b160e"]]);const Kt={name:"PaginationNavButton"};function Wt(e,t,a,i,r,n){return m(),M(ne,Q({class:"paginationNavButton",height:"100%"},e.$attrs),we({_:2},[re(e.$slots,(u,s)=>({name:s,fn:V(c=>[Te(e.$slots,s,Q({props:u},c),void 0,!0)])}))]),1040)}const tl=O(Kt,[["render",Wt],["__scopeId","data-v-852fad11"]]),Be=dt.browser.vuetifyNullCode,Ne="None",Yt={value:Be,title:Ne},Qt=function(e,t){let a;return e===void 0?a=e:e instanceof Object?(a={value:e.pk,title:e.name},e.pk===null||e.name===void 0?a.value=Be:t||(a.value=+e.pk),(a.title===null||a.value===void 0)&&(a.title=Ne)):e===null?a=Yt:a={value:e,title:e.toString()},a},Xt=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},Jt=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},Zt=function(e,t,a=!1,i=!1){const r=e||[],n=t&&t.toLowerCase();let u=[];for(const c of r){const v=Qt(c,i);v&&(!n||v.title&&v.title.toLowerCase().includes(n))&&u.push(v)}const s=a?Jt:Xt;return u.sort(s)};const ea={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function ta(e,t,a,i,r,n){return m(),M(ct,Q({"aria-label":"loading",class:"codexProgressCircular",indeterminate:a.indeterminate},e.$attrs),null,16,["indeterminate"])}const Re=O(ea,[["render",ta],["__scopeId","data-v-7bb4cf22"]]),aa=(e,t)=>e?`${mt(e)}/cover.webp?${t}`:window.CODEX.MISSING_COVER;const la={name:"BookCover",props:{group:{type:String,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},coverPk:{type:Number,required:!0}},data(){return{showPlaceholder:!1}},computed:{...J(Z,{coverSrc:function(e){return aa(this.coverPk,e.page.coversTimestamp)}})},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},sa={class:"bookCover"},na={key:1,class:"childCount"};function oa(e,t,a,i,r,n){return m(),P("div",sa,[l(vt,{src:e.coverSrc,class:"coverImg"},null,8,["src"]),a.finished!==!0?(m(),P("div",{key:0,class:he({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):N("",!0),a.group!=="c"?(m(),P("span",na,F(a.childCount),1)):N("",!0)])}const Le=O(la,[["render",oa],["__scopeId","data-v-9acb5f6a"]]);const ra={name:"MetadataTags",props:{label:{type:String,required:!0},items:{type:Array,default(){return[]}},values:{type:Array,default(){return[]}}},data(){return{mdiFilter:ht}},computed:{...J(Z,{filterValues:function(e){return e.settings.filters[this.label.toLowerCase()]}}),model(){return Zt(this.values)}},methods:{chipColor:function(e){return this.filterValues&&this.filterValues.includes(e)?this.$vuetify.theme.current.colors["primary-darken-1"]:""}}},ia={key:0,class:"tags"},ua={class:"label"};function da(e,t,a,i,r,n){return n.model&&n.model.length>0?(m(),P("div",ia,[l(pt,{value:n.model,multiple:"",class:"chipGroup"},{default:V(()=>[d("div",ua,F(a.label),1),(m(!0),P(ve,null,re(n.model,u=>(m(),M(ft,{key:`${a.label}/${u.value}`,color:n.chipColor(u.value),value:u.value,text:u.title},null,8,["color","value","text"]))),128))]),_:1},8,["value"])])):N("",!0)}const Fe=O(ra,[["render",da],["__scopeId","data-v-80903885"]]);const ca={name:"MetadataTextBox",props:{label:{type:String,required:!0},value:{type:[Object,String,Number,Boolean],default:void 0},link:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1}},data(){return{mdiOpenInNew:_t}},computed:{computedValue:function(){return this.value!=null&&this.value instanceof Object?this.value.name:this.value}}},ma={class:"textLabel"},va=["href"],ha={key:1,class:"textContent"};function fa(e,t,a,i,r,n){return n.computedValue?(m(),P("div",{key:0,class:he(["text",{highlight:a.highlight}])},[d("div",ma,F(a.label),1),a.link?(m(),P("a",{key:0,href:n.computedValue,target:"_blank"},[Y(F(n.computedValue)+" ",1),l(oe,{size:"small"},{default:V(()=>[Y(F(r.mdiOpenInNew),1)]),_:1})],8,va)):(m(),P("div",ha,F(n.computedValue),1))],2)):N("",!0)}const $e=O(ca,[["render",fa],["__scopeId","data-v-48a2f357"]]);const pa={name:"MetadatacreatorsTable",props:{value:{type:Array,default:void 0}},data(){return{}},computed:{sortedcreators:function(){return this.value?[...this.value].sort(this.creatorsCompare):[]},...J(Z,{filteredCreators(e){return e.settings.filters.creators}})},methods:{roleName:function(e){return e==="CoverArtist"?"Cover Artist":e},creatorSortable:function(e){const t=e.person.name.split(" ");let a=[];return t&&(a.push(t.slice(-1)),t.length>1&&a.push(t.slice(0,-1))),a.push(e.role.name),a.join(" ")},creatorsCompare:function(e,t){const a=this.creatorSortable(e),i=this.creatorSortable(t);return a<i?-1:a>i?1:0},isFilteredCreator(e){return this.filteredCreators&&this.filteredCreators.includes(e)}}},Ee=e=>(Me("data-v-5b504961"),e=e(),Pe(),e),_a=Ee(()=>d("h2",null,"creators",-1)),ba={class:"highlight-table"},ga=Ee(()=>d("thead",null,[d("tr",null,[d("th",{class:"text-left"},"Role"),d("th",{class:"text-left"},"Creator")])],-1)),ya={class:"highlight"};function ka(e,t,a,i,r,n){return n.sortedcreators&&n.sortedcreators.length>0?(m(),M(bt,{key:0,id:"creatorsTable"},{default:V(()=>[_a,d("table",ba,[ga,d("tbody",null,[(m(!0),P(ve,null,re(n.sortedcreators,u=>(m(),P("tr",{key:u.pk},[d("td",null,F(n.roleName(u.role.name)),1),d("td",{class:he({filteredOn:n.isFilteredCreator(u.person.pk)})},[d("span",ya,F(u.person.name),1)],2)]))),128))])])]),_:1})):N("",!0)}const Sa=O(pa,[["render",ka],["__scopeId","data-v-5b504961"]]),Ca=({pk:e,page:t,readLtr:a,pageCount:i})=>{if(i){if(t)t=Number(t);else if(a)t=0;else{const r=Number(i)-1;t=Math.max(r,0)}return{name:"reader",params:{pk:e,page:t}}}},Ce=gt("metadata",{state:()=>({md:void 0}),actions:{async loadMetadata({group:e,pk:t}){const a=Z();await yt.getMetadata({group:e,pk:t},a.settings).then(i=>(this.md=i.data,!0)).catch(i=>{console.error(i),this.clearMetadata()})},clearMetadata(){this.md=void 0}}});const wa=1160,Ta=.05,Va=250,Ma={name:"MetadataButton",components:{BookCover:Le,CloseButton:Ie,MetadatacreatorsTable:Sa,MetadataTags:Fe,MetadataText:$e,PlaceholderLoading:Re},props:{group:{type:String,required:!0},pk:{type:Number,required:!0},children:{type:Number,default:1}},data(){return{mdiDownload:kt,mdiTagOutline:St,dialog:!1,progress:0}},computed:{...Ct(wt,["isUserAdmin"]),...J(Z,{twentyFourHourTime:e=>e.settings.twentyFourHourTime}),...J(Ce,{md:e=>e.md,downloadFileName:e=>{const t=e.md;return e.md.path?t.path.split("/").at(-1):Tt({seriesName:t.series.name,volumeName:t.volume.name,issue:t.issue,issueSuffix:t.issueSuffix})+"."+globalThis.fileType.toLowerCase()}}),...J(Z,{q:e=>e.settings.q}),downloadURL:function(){return Vt(this.pk)},isReadButtonShown:function(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled:function(){return this.$route.name==="browser"&&!!this.readerRoute},readButtonIcon:function(){return this.isReadButtonEnabled?Mt:Pt},readerRoute:function(){return Ca(this.md)},formattedIssue:function(){if(!((this.md.issue===null||this.md.issue===void 0)&&!this.md.issueSuffix))return It({issue:this.md.issue,issueSuffix:this.md.issueSuffix})},ltrText:function(){return this.md.readLtr?"Left to Right":"Right to Left"},pages:function(){let e="";if(this.md.page){const a=de.numberFormat(this.md.page,0);e+=`Read ${a} of `}const t=de.numberFormat(this.md.pageCount,0);return e+=`${t} pages`,this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size:function(){return de.filesize(this.md.size)},fileType:function(){return this.md.fileType||"Unknown"}},watch:{dialog:function(e){e?this.dialogOpened():this.clearMetadata()}},mounted(){window.addEventListener("keyup",this._keyListener)},beforeUnmount(){window.removeEventListener("keyup",this._keyListener)},methods:{...Se(Ce,["clearMetadata","loadMetadata"]),...Se(Bt,["downloadIOSPWAFix"]),dialogOpened:function(){this.loadMetadata({group:this.group,pk:this.pk}),this.startProgress()},startProgress:function(){this.startTime=Date.now(),this.estimatedMS=Math.max(Ta,this.children/wa)*1e3,this.updateProgress()},updateProgress:function(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Va)},formatDateTime:function(e){return Nt(e,this.twentyFourHourTime)},download(){this.downloadIOSPWAFix(this.downloadURL,this.downloadFileName)},_keyListener(e){e.stopImmediatePropagation(),e.key==="Escape"&&(this.dialog=!1)}}},Pa=e=>(Me("data-v-f47c682e"),e=e(),Pe(),e),Ia={key:0,id:"metadataContainer"},Ba={id:"metadataHeader"},Na={id:"metadataBookCoverWrapper"},Ra={class:"headerHalfRow"},La={class:"headerQuarterRow"},Fa={class:"mdSection"},$a={key:0,class:"inlineRow"},Ea={id:"metadataBody"},Da={class:"mdSection"},za={class:"thirdRow"},Aa={class:"mdSection"},Oa={class:"quarterRow"},qa={class:"lastSmallRow"},xa={class:"halfRow mdSection"},Ua={class:"mdSection"},ja={class:"mdSection"},Ga={class:"mdSection"},Ha={class:"mdSection"},Ka={id:"footerLinks"},Wa={id:"bottomRightButtons"},Ya={key:1,id:"placeholderContainer"},Qa=Pa(()=>d("div",{id:"placeholderTitle"},"Tags Loading",-1));function Xa(e,t,a,i,r,n){const u=Ie,s=$e,c=Le,v=Fe,g=$t("MetadatacreatorsTable"),R=Re;return m(),M(Ft,{modelValue:r.dialog,"onUpdate:modelValue":t[4]||(t[4]=S=>r.dialog=S),fullscreen:"",transition:"dialog-bottom-transition"},{activator:V(({props:S})=>[l(ne,Q({"aria-label":"tags",class:"tagButton cardControlButton",icon:"",title:"Tags",variant:"text"},S,{onClick:t[0]||(t[0]=Rt(()=>{},["prevent"]))}),{default:V(()=>[l(oe,null,{default:V(()=>[Y(F(r.mdiTagOutline),1)]),_:1})]),_:2},1040)]),default:V(()=>[e.md?(m(),P("div",Ia,[d("header",Ba,[l(u,{class:"closeButton",title:"Close Metadata (esc)",size:"x-large",onClick:t[1]||(t[1]=S=>r.dialog=!1)}),e.q?(m(),M(s,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):N("",!0),d("div",Na,[l(c,{id:"bookCover","cover-pk":e.md.coverPk,group:a.group,"child-count":e.md.childCount,finished:e.md.finished},null,8,["cover-pk","group","child-count","finished"]),l(Lt,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])]),d("div",Ra,[l(s,{id:"publisher",value:e.md.publisher,label:"Publisher",highlight:e.md.group==="p"},null,8,["value","highlight"]),l(s,{id:"imprint",value:e.md.imprint,label:"Imprint",highlight:e.md.group==="i"},null,8,["value","highlight"])]),l(s,{id:"series",value:e.md.series,label:"Series",highlight:e.md.group==="s"},null,8,["value","highlight"]),d("div",La,[l(s,{id:"volume",value:e.md.volume,label:"Volume",highlight:e.md.group==="v"},null,8,["value","highlight"]),l(s,{value:e.md.volumeCount,label:"Volume Count"},null,8,["value"]),l(s,{id:"issue",value:n.formattedIssue,label:"Issue",highlight:e.md.group==="c"},null,8,["value","highlight"]),l(s,{value:e.md.issueCount,label:"Issue Count"},null,8,["value"])]),d("section",Fa,[l(s,{value:e.md.name,label:"Title"},null,8,["value"]),e.md.year||e.md.month||e.md.day?(m(),P("div",$a,[l(s,{value:e.md.year,label:"Year",class:"datePicker",type:"number"},null,8,["value"]),l(s,{value:e.md.month,label:"Month",class:"datePicker"},null,8,["value"]),l(s,{value:e.md.day,label:"Day",class:"datePicker"},null,8,["value"])])):N("",!0),l(s,{value:e.md.original_format,label:"Original Format"},null,8,["value"])])]),d("div",Ea,[d("section",Da,[d("div",za,[l(s,{value:n.pages,label:"Pages"},null,8,["value"]),l(s,{value:e.md.finished,label:"Finished"},null,8,["value"]),l(s,{value:n.ltrText,label:"Reading Direction"},null,8,["value"])])]),d("section",Aa,[d("div",Oa,[e.md.createdAt?(m(),M(s,{key:0,value:n.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):N("",!0),e.md.updatedAt?(m(),M(s,{key:1,value:n.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):N("",!0),l(s,{value:n.size,label:"Size"},null,8,["value"]),l(s,{value:n.fileType,label:"File Type"},null,8,["value"])]),d("div",qa,[l(s,{value:e.md.path,label:"Path"},null,8,["value"])])]),d("section",xa,[l(s,{value:e.md.country,label:"Country"},null,8,["value"]),l(s,{value:e.md.language,label:"Language"},null,8,["value"])]),d("section",Ua,[l(s,{value:e.md.communityRating,label:"Community Rating"},null,8,["value"]),l(s,{value:e.md.criticalRating,label:"Critical Rating"},null,8,["value"]),l(s,{value:e.md.ageRating,label:"Age Rating"},null,8,["value"])]),d("section",ja,[l(v,{values:e.md.genres,label:"Genres"},null,8,["values"]),l(v,{values:e.md.tags,label:"Tags"},null,8,["values"]),l(v,{values:e.md.teams,label:"Teams"},null,8,["values"]),l(v,{values:e.md.characters,label:"Characters"},null,8,["values"]),l(v,{values:e.md.locations,label:"Locations"},null,8,["values"]),l(v,{values:e.md.storyArcs,label:"Story Arcs"},null,8,["values"]),l(v,{values:e.md.seriesGroups,label:"Series Groups"},null,8,["values"])]),d("section",Ga,[l(s,{value:e.md.web,label:"Web Link",link:!0},null,8,["value"]),l(s,{value:e.md.summary,label:"Summary"},null,8,["value"]),l(s,{value:e.md.comments,label:"Comments"},null,8,["value"]),l(s,{value:e.md.notes,label:"Notes"},null,8,["value"]),l(s,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])]),d("section",Ha,[l(g,{value:e.md.creators},null,8,["value"])])]),d("footer",Ka,[a.group==="c"?(m(),M(ne,{key:0,id:"downloadButton",title:"Download Comic Archive",onClick:n.download},{default:V(()=>[a.group==="c"?(m(),M(oe,{key:0},{default:V(()=>[Y(F(r.mdiDownload),1)]),_:1})):N("",!0),Y(" Download ")]),_:1},8,["onClick"])):N("",!0),n.isReadButtonShown?(m(),M(ne,{key:1,to:n.readerRoute,title:"Read Comic",disabled:!n.isReadButtonEnabled},{default:V(()=>[l(oe,null,{default:V(()=>[Y(F(n.readButtonIcon),1)]),_:1}),Y(" Read ")]),_:1},8,["to","disabled"])):N("",!0),d("span",Wa,[l(u,{class:"closeButton",title:"Close Metadata (esc)",size:"x-large",onClick:t[2]||(t[2]=S=>r.dialog=!1)})])])])):(m(),P("div",Ya,[l(u,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[3]||(t[3]=S=>r.dialog=!1)}),Qa,l(R,{"model-value":r.progress,indeterminate:r.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const al=O(Ma,[["render",Xa],["__scopeId","data-v-f47c682e"]]);export{Re as P,tl as _,el as a,Za as b,al as c,Le as d,Ca as g,Zt as t};
