[tox]
requires =
    tox>=4
env_list = coverage, lint, typecheck, py{311}

[testenv]
description = run unit tests w/ python {basepython}
deps =
    pytest>=7
    pytest-sugar
    pytest-asyncio
commands = 
    pytest {posargs:tests}

[testenv:coverage]
description = check test coverage
deps =
    pytest>=7
    pytest-asyncio
    coverage
commands = 
    coverage erase
    coverage run --source=./wavecom -m pytest {posargs:tests}
    coverage report

[testenv:lint]
description = lints the code
skip_install = true
deps = 
    ruff
commands =
    ruff check --diff .

[testenv:typecheck]
description = typechecks the code
deps =
    mypy>=1
commands =
    mypy {posargs:wavecom}
