"use strict";(self.webpackChunk_g2nb_jupyter_wysiwyg=self.webpackChunk_g2nb_jupyter_wysiwyg||[]).push([[258],{649:(e,t,s)=>{s.d(t,{x:()=>d,L:()=>h});var n=s(952),i=s(526),r=s(840),o=s(923),l=s(918),a=s(871),u=s(967),c=s.n(u);s(890),s(860),s(608),s(400),s(190),s(835),s(414),s(682),s(236),s(619);class d{constructor(e,t){this._uuid="",this._is_disposed=!1,this._keydownHandlers=new Array,this.is_markdown=!1,this.edgeRequested=new r.Signal(this),this.host=e.host,this.host.classList.add("jp-RenderedHTMLCommon"),this.host.classList.add("jp-TinyMCE"),this.host.addEventListener("focus",this.blur,!0),this.host.addEventListener("blur",this.focus,!0),this.host.addEventListener("scroll",this.scroll,!0),this._uuid=e.uuid||i.UUID.uuid4(),this._model=e.model,this.is_markdown=t.metadata.get("markdownMode"),this.is_markdown&&(this.is_markdown=!1),this._view=new h(this.host,this.model)}get view(){return this._view}get uuid(){return this._uuid}get is_disposed(){return this._is_disposed}get model(){return this._model}get lineCount(){return d.DEFAULT_NUMBER}get selectionStyle(){return this._selection_style}get doc(){return new p}set uuid(e){this._uuid=e}set selectionStyle(e){this._selection_style=e}blur(){this._view&&this._view.blur()}focus(){this._view&&this._view.focus()}addKeydownHandler(e){return this._keydownHandlers.push(e),new o.DisposableDelegate((()=>{l.ArrayExt.removeAllWhere(this._keydownHandlers,(t=>t===e))}))}dispose(){this._is_disposed||(this._is_disposed=!0,this.host.removeEventListener("focus",this.focus,!0),this.host.removeEventListener("focus",this.blur,!0),this.host.removeEventListener("focus",this.scroll,!0),r.Signal.clearData(this))}refresh(){const e=a.XY.instance().tracker.activeCell;e instanceof n.MarkdownCell&&!e.rendered&&a.XY.instance().no_side_button()&&(e.editor.focus(),a.XY.instance().render_side_button())}getCursorPosition(){return new class{}}getCursor(){return this.getCursorPosition()}clearHistory(){}scroll(){}getCoordinateForPosition(e){}getLine(e){}getOffsetAt(e){return 0}getOption(e){}getPositionAt(e){}getPositionForCoordinate(e){}getSelection(){}getSelections(){return[]}getTokenForPosition(e){}getTokens(){return[]}hasFocus(){return!1}newIndentedLine(){}operation(e){}redo(){}removeOverlay(e){}resizeToFit(){}revealPosition(e){}revealSelection(e){}setCursorPosition(e){}setOption(e,t){}setOptions(e){}setSelection(e){}setSelections(e){}setSize(e){}undo(){}firstLine(){return""}lastLine(){return""}}d.DEFAULT_NUMBER=0;class p{sliceString(e,t){return""}toString(){return""}get length(){return 0}lineAt(e){return""}line(e){return""}firstLine(){return""}lastLine(){return""}getSelection(){return""}getRange(e,t){return""}removeOverlay(e){}}class h{constructor(e,t){const s=document.createElement("div");e.appendChild(s),setTimeout((()=>{var n;const i=null===(n=null==e?void 0:e.parentElement)||void 0===n?void 0:n.querySelector(".jp-MarkdownOutput");i&&i.querySelectorAll(".jp-InternalAnchorLink").forEach((e=>e.remove())),s.innerHTML=(null==i?void 0:i.innerHTML)||t.value.text;try{c().init({target:s,skin:!1,content_css:!1,branding:!1,contextmenu:!1,elementpath:!1,menubar:!1,height:300,resize:!1,plugins:"emoticons lists link code",toolbar:"styleselect fontsizeselect | bold italic underline strikethrough | subscript superscript | link forecolor backcolor emoticons | bullist numlist outdent indent blockquote | code",init_instance_callback:e=>e.on("Change",(()=>t.value.text=e.getContent()))}).then((e=>{e.length&&e[0].on("focus",(()=>{const e=this.get_cell_index(t);null!==e&&(a.XY.instance().tracker.currentWidget.content.activeCellIndex=e)}))}))}catch(e){console.log("TinyMCE threw an error: "+e)}}),500)}blur(){}focus(){}get_cell_index(e){const t=e.modelDB.basePath,s=a.XY.instance().tracker.currentWidget.content.widgets;for(let e=0;e<s.length;e++)if(t===s[e].model.modelDB.basePath)return e;return null}}},871:(e,t,s)=>{s.d(t,{Jm:()=>u,Oz:()=>c,XY:()=>d});var n=s(767),i=s(952),r=s(526),o=s(431),l=s(649),a=s(591);class u extends n.NotebookPanel.ContentFactory{constructor(e){super(e)}createMarkdownCell(e,t){const s=e.model;return e.contentFactory=new u({editorFactory:e=>new l.x(e,s)}),new i.MarkdownCell(e).initializeState()}}const c=new r.Token("jupyter-wysiwyg");class d extends o.Widget{constructor(){super()}static instance(){return d._singleton||(d._singleton=new d),d._singleton}get tracker(){return this._tracker}set tracker(e){this._tracker=e}get previous_cell(){return this._previous_cell}set previous_cell(e){this._previous_cell=e}no_side_button(){var e;return!(null===(e=this.sidebar(this._tracker.activeCell.node))||void 0===e?void 0:e.querySelector(".jp-RenderButton"))}render_side_button(){const e=this.sidebar(this._tracker.activeCell.node),t=this.run_button(this._tracker.activeCell,this._tracker.currentWidget);e.append(t)}remove_side_button(){var e;this._previous_cell&&(null===(e=this.sidebar(this._previous_cell.node).querySelector(".jp-RenderButton"))||void 0===e||e.remove()),this._previous_cell=this._tracker.activeCell}sidebar(e){var t;return null===(t=e.closest(".jp-Cell"))||void 0===t?void 0:t.querySelector(".jp-InputArea-prompt")}run_button(e,t){const s=document.createElement("button");return s.classList.add("jp-ToolbarButtonComponent","jp-Button","jp-RenderButton"),s.setAttribute("title","Render this cell"),s.innerHTML=a.runIcon.svgstr,s.addEventListener("click",(()=>{t.content.select(e),setTimeout((()=>{n.NotebookActions.runAndAdvance(t.content,t.sessionContext)}),200)})),s}}},258:(e,t,s)=>{s.r(t),s.d(t,{EditorContentFactory:()=>o.Jm,EditorWidget:()=>o.XY,IEditorContentFactory:()=>o.Oz,MODULE_NAME:()=>r,MODULE_VERSION:()=>i,TinyMCEEditor:()=>l.x,TinyMCEView:()=>l.L});const n=s(147),i=n.version,r=n.name;var o=s(871),l=s(649)},147:e=>{e.exports=JSON.parse('{"name":"@g2nb/jupyter-wysiwyg","version":"23.2.0","description":"WYSIWYG editing functionality for markdown/HTML cells in Jupyter","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.{js,css}","style/*.{js,css,png,svg}","dist/*.{js,css}","style/index.js"],"homepage":"https://github.com/g2nb/jupyter-wysiwyg","bugs":{"url":"https://github.com/g2nb/jupyter-wysiwyg/issues"},"license":"BSD-3-Clause","author":{"name":"Thorin Tabor","email":"tmtabor@cloud.ucsd.edu"},"main":"lib/index.js","types":"./lib/index.d.ts","style":"style/index.css","repository":{"type":"git","url":"https://github.com/g2nb/jupyter-wysiwyg"},"scripts":{"build":"jlpm run build:lib && jlpm run build:labextension:dev","build:all":"jlpm run build:lib && jlpm run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","clean":"jlpm run clean:lib","clean:all":"jlpm run clean:lib && jlpm run clean:labextension","clean:labextension":"rimraf jupyter-wysiwyg/labextension","clean:lib":"rimraf lib tsconfig.tsbuildinfo","eslint":"eslint . --ext .ts,.tsx --fix","eslint:check":"eslint . --ext .ts,.tsx","install:extension":"jlpm run build","prepack":"jlpm run build:lib","prepare":"jlpm run clean && jlpm run build:all","test":"jlpm run test:firefox","test:chrome":"karma start --browsers=Chrome tests/karma.conf.js","test:debug":"karma start --browsers=Chrome --singleRun=false --debug=true tests/karma.conf.js","test:firefox":"karma start --browsers=Firefox tests/karma.conf.js","test:ie":"karma start --browsers=IE tests/karma.conf.js","watch":"run-p watch:src watch:labextension","watch:labextension":"jupyter labextension watch .","watch:lib":"tsc -w","watch:src":"tsc -w"},"dependencies":{"@jupyter-widgets/base":"^4.0.0","@jupyterlab/application":"^3.5.3","@jupyterlab/mainmenu":"^3.5.3","@jupyterlab/notebook":"^3.5.3","tinymce":"^5.9.2"},"devDependencies":{"@jupyterlab/apputils":"^3.5.3","@jupyterlab/builder":"^3.5.3","@jupyterlab/codeeditor":"3.5.3","@jupyterlab/ui-components":"^3.5.3","@lumino/application":"^1.31.3","@lumino/widgets":"^1.37.1","@types/backbone":"^1.4.4","@types/node":"^14.14.27","@typescript-eslint/eslint-plugin":"^4.8.1","@typescript-eslint/parser":"^4.8.1","backbone":"^1.2.3","css-loader":"^5.0.2","eslint":"^7.14.0","expect.js":"^0.3.1","file-loader":"^6.2.0","fs-extra":"^9.1.0","karma":"^6.1.1","karma-typescript":"^5.3.0","mkdirp":"^1.0.4","mocha":"^8.3.0","npm-run-all":"^4.1.5","rimraf":"^3.0.2","source-map-loader":"^2.0.1","style-loader":"^2.0.0","ts-loader":"^8.0.17","typescript":"~4.1.3","webpack":"^5.21.2","webpack-cli":"^4.5.0"},"jupyterlab":{"extension":"lib/plugin","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}},"discovery":{"kernel":[{"kernel_spec":{"language":"^python"},"base":{"name":"jupyter-wysiwyg"},"managers":["pip","conda"]}]},"outputDir":"jupyter-wysiwyg/labextension"},"styleModule":"style/index.js"}')}}]);