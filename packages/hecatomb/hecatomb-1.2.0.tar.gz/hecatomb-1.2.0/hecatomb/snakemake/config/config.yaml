# For more information see: https://github.com/shandley/hecatomb and https://hecatomb.readthedocs.io/en/latest/

# Custom database location. Blank = use install location. You can also specify with environment variable HECATOMB_DB
args:
    databases:

resources:
    big:
        mem: 64000      # Memory for big (mostly mmseqs) jobs in megabytes (e.g 64GB = 64000, recommend >= 64000)
        cpu: 24         # Threads (recommend >= 16)
        time: 1440      # Max runtime in minutes (allows to set max time for the scheduler via snakemake profiles)
    med:
        mem: 32000      # Memory for most jobs in megabytes (recommend >= 32000)
        cpu: 16         # CPUs for most jobs in megabytes (recommend >= 16)
        time: 60        # Max runtime in minutes for medium jobs (relevant for scheduler)
    sml:
        time: 10        # Max runtime in minutes for small jobs (used for grouped jobs; relevant for scheduler)
    ram:
        mem: 16000      # Memory for slightly RAM-hungry jobs in megabytes (recommend >= 16000)
        cpu: 2          # CPUs for slightly RAM-hungry jobs (recommend >= 2)

qc:
    compression: 1      # Compression level for gzip output (1 ~ 9). 1 is fastest, 9 is smallest
    fastp:
        --qualified_quality_phred 15
        --length_required 90
        --cut_tail 
        --cut_tail_window_size 25
        --cut_tail_mean_quality 15
        --dedup
        --dup_calc_accuracy 4
        --trim_poly_x

mmseqs:
    linclustParams:
        --kmer-per-seq-scale 0.3
        -c 0.8
        --cov-mode 1
        --min-seq-id 0.97
        --alignment-mode 3
    filtAAprimary:
        --min-length 30
        -e 1e-3
    filtAAsecondary:
        --min-length 30
        -e 1e-5
    filtNTprimary:
        --min-length 90
        -e 1e-10
    filtNTsecondary:
        --min-length 90
        -e 1e-20
    perfAA:
        --start-sens 1
        --sens-steps 3
        -s 7
        --lca-mode 2
        --shuffle 0
    perfAAfast:
        -s 4.0
        --lca-mode 2
        --shuffle 0
    perfNT:
        --start-sens 2
        -s 7
        --sens-steps 3
    perfNTfast:
        -s 4.0
    taxIdIgnore: 0 1 2 10239 131567 12429 2759      # TaxIDs to defer to topHit rather than LCA

assembly:
    canu:
        correctedErrorRate=0.16
        maxInputCoverage=10000
        minInputCoverage=0
        corOutCoverage=10000
        corMhapSensitivity=high
        corMinCoverage=0
        useGrid=False
        stopOnLowCoverage=False
        genomeSize=10M
        -nanopore
        # -pacbio
        # -pacbio-hifi
    megahit:
        --k-min 45
        --k-max 225
        --k-step 26
        --min-count 2
        --min-contig-len 1000
    flye:
        -g 1g
    metaflye:
        --meta
        -g 1g
        --nano-raw
        # --pacbio-raw
