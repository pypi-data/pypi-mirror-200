window.bubble_train=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var n,o=function(){var t=document.currentScript;if(!t){for(var e=document.getElementsByTagName("script"),r=[],n=0;n<e.length;n++)r.push(e[n]);t=(r=r.filter((function(t){return!t.async&&!t.text&&!t.textContent}))).slice(-1)[0]}return t};if(Object.defineProperty(r,"p",{get:(n=o().src.split("/").slice(0,-1).join("/")+"/",function(){return n})}),"undefined"!=typeof jsonpScriptSrc){var i=jsonpScriptSrc;jsonpScriptSrc=function(t){var e=function(t){return/\/_dash-component-suites\//.test(t.src)}(o()),r=i(t);if(!e)return r;var n=r.split("/"),s=n.slice(-1)[0].split(".");return s.splice(1,0,"v0_0_47m1676585589"),n.splice(-1,1,s.join(".")),n.join("/")}}return r(r.s=8)}([function(t,e){t.exports=window.PropTypes},function(t,e){t.exports=window.React},function(t,e,r){var n=r(4);"string"==typeof n&&(n=[[t.i,n,""]]);var o={insertAt:"top",hmr:!0,transform:void 0,insertInto:void 0};r(6)(n,o);n.locals&&(t.exports=n.locals)},,function(t,e,r){(e=r(5)(!1)).push([t.i,".draggable_header {\r\n    background: #ccc;\r\n    width: 100%;\r\n    user-select: none;\r\n    text-align: center;\r\n}\r\n\r\n.draggable_title {\r\n    background: transparent;\r\n    text-align: center;\r\n    width: 50%;\r\n    user-select: none;\r\n    border: 0px;\r\n    outline: none;\r\n}\r\n\r\n.draggable_topter {\r\n    background: #ccc;\r\n    width: 100%;\r\n    user-select: none;\r\n    top: 0;\r\n}\r\n\r\n.draggable_footer {\r\n    background: #ccc;\r\n    width: 100%;\r\n    user-select: none;\r\n    position: absolute;\r\n    bottom: 0;\r\n}\r\n\r\n.draggable_panel {\r\n    overflow: hidden;\r\n    resize: both;\r\n    position: absolute;\r\n\r\n    box-shadow: 0px 0px 50px 1px #e8e8e8;\r\n    user-select: none;\r\n\r\n    z-index: 9;\r\n}\r\n\r\n.bubbletrain_panel {\r\n    user-select: none;\r\n    z-index: 9;\r\n}\r\n\r\n.draggable_content {\r\n    overflow: auto;\r\n    position: absolute;\r\n    background: white;\r\n    width: 100%;\r\n    height: 92%;\r\n    user-select: none;\r\n}\r\n\r\n.main_panel {\r\n}\r\n\r\n/* width */\r\n.draggable_content::-webkit-scrollbar {\r\n  width: 5px;\r\n  height: 5px;\r\n}\r\n\r\n.draggable_content:hover::-webkit-scrollbar {\r\n  width: 10px;\r\n  height: 10px;\r\n}\r\n\r\n::-webkit-scrollbar {\r\n  width: 10px;\r\n  height: 10px;\r\n}\r\n\r\n/* Track */\r\n::-webkit-scrollbar-track {\r\n  box-shadow: inset 0 0 1px #ccc;\r\n  border-radius: 0px;\r\n}\r\n\r\n/* Handle */\r\n::-webkit-scrollbar-thumb {\r\n  background: #e0e0e0;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Handle on hover */\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: #b5b3b0;\r\n}\r\n",""]),t.exports=e},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var o=(s=n,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),i=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[r].concat(i).concat([o]).join("\n")}var s,a,c;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);n&&o[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),e.push(c))}},e}},function(t,e,r){var n,o,i={},s=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),a=function(t,e){return e?e.querySelector(t):document.querySelector(t)},c=function(t){var e={};return function(t,r){if("function"==typeof t)return t();if(void 0===e[t]){var n=a.call(this,t,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),u=null,l=0,p=[],f=r(7);function d(t,e){for(var r=0;r<t.length;r++){var n=t[r],o=i[n.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(b(n.parts[s],e))}else{var a=[];for(s=0;s<n.parts.length;s++)a.push(b(n.parts[s],e));i[n.id]={id:n.id,refs:1,parts:a}}}}function g(t,e){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};n[s]?n[s].parts.push(a):r.push(n[s]={id:s,parts:[a]})}return r}function h(t,e){var r=c(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=p[p.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),p.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=c(t.insertAt.before,r);r.insertBefore(e,o)}}function _(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=p.indexOf(t);e>=0&&p.splice(e,1)}function y(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return r.nc}();n&&(t.attrs.nonce=n)}return v(e,t.attrs),h(t,e),e}function v(t,e){Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])}))}function b(t,e){var r,n,o,i;if(e.transform&&t.css){if(!(i="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}if(e.singleton){var s=l++;r=u||(u=y(e)),n=w.bind(null,r,s,!1),o=w.bind(null,r,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),h(t,e),e}(e),n=O.bind(null,r,e),o=function(){_(r),r.href&&URL.revokeObjectURL(r.href)}):(r=y(e),n=x.bind(null,r),o=function(){_(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=g(t,e);return d(r,e),function(t){for(var n=[],o=0;o<r.length;o++){var s=r[o];(a=i[s.id]).refs--,n.push(a)}t&&d(g(t,e),e);for(o=0;o<n.length;o++){var a;if(0===(a=n[o]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete i[a.id]}}}};var m,P=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")});function w(t,e,r,n){var o=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=P(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function x(t,e){var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function O(t,e,r){var n=r.css,o=r.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(n=f(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(t,e,r){"use strict";r.r(e);var n=r(1),o=r.n(n),i=r(0),s=r.n(i);r(2);var a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let c;const u=new Uint8Array(16);function l(){if(!c&&(c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!c))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(u)}const p=[];for(let t=0;t<256;++t)p.push((t+256).toString(16).slice(1));function f(t,e=0){return(p[t[e+0]]+p[t[e+1]]+p[t[e+2]]+p[t[e+3]]+"-"+p[t[e+4]]+p[t[e+5]]+"-"+p[t[e+6]]+p[t[e+7]]+"-"+p[t[e+8]]+p[t[e+9]]+"-"+p[t[e+10]]+p[t[e+11]]+p[t[e+12]]+p[t[e+13]]+p[t[e+14]]+p[t[e+15]]).toLowerCase()}var d=function(t,e,r){if(a.randomUUID&&!e&&!t)return a.randomUUID();const n=(t=t||{}).random||(t.rng||l)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(let t=0;t<16;++t)e[r+t]=n[t];return e}return f(n)};function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w(n.key),n)}}function _(t,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e,r){return(e=w(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===g(e)?e:String(e)}var x={},O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(s,t);var e,r,n,i=y(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),P(b(e=i.call(this,t)),"get_z",(function(){return e.max_z=e.max_z+1,e.max_z})),P(b(e),"do_escape",(function(t){"Escape"==t.key&&(e.stop_moving(),e.redraw_paths())})),P(b(e),"hlClick",(function(t){if(e.get_moving())if(e.pos_ready){var r=e.ref_svg.current.getBoundingClientRect(),n=r.x,o=r.y;e.set_pos(t.clientX-n,t.clientY-o),e.redraw_paths()}else e.pos_ready=!0})),P(b(e),"hlMove",(function(t){if(e.get_moving())if(e.pos_ready){var r=e.ref_svg.current.getBoundingClientRect(),n=r.x,o=r.y;e.redraw_paths([t.clientX-n,t.clientY-o])}else e.pos_ready=!0})),P(b(e),"hlScroll",(function(t){e.redraw_paths()})),P(b(e),"set_dots_ref",(function(t){e.dots_ref[t.getProps("id")]=t})),P(b(e),"del_dots_ref",(function(t){delete e.dots_ref[t.getProps("id")],t.getProps("id")in e.dots_dict&&delete e.dots_dict[t.getProps("id")]})),P(b(e),"set_pos",(function(t,r){e.pos_list=e.pos_list.concat([[t,r]])})),P(b(e),"get_pos_list",(function(){return e.pos_list})),P(b(e),"set_moving",(function(t){e.moving_id=t})),P(b(e),"stop_moving",(function(){e.moving_id=null,e.pos_list=[],e.pos_ready=!1})),P(b(e),"get_moving",(function(){return e.moving_id})),P(b(e),"redraw_paths",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=[];for(var n in e.dots_dict){var o=e.dots_ref[n],i=e.dots_dict[n].target_list,s=e.dots_dict[n].target_pl_list,a=o.get_updated_path(i,s);r=r.concat(a)}if(e.get_moving()){var c=e.dots_ref[e.get_moving()],u=e.get_pos_list();t&&(u=u.concat([t]));var l=c.get_complete_path(u);r=r.concat(l)}e.setProps({path_list:r})})),P(b(e),"clear_targets",(function(t){var r={target_list:[],target_pl_list:[]};t.setProps(r),e.dots_dict[t.getProps("id")]=r})),P(b(e),"set_target",(function(t){var r=t.getProps("id"),n=e.dots_ref[e.get_moving()],o=n.get_updated_targets(r,e.get_pos_list()),i={target_list:o.target_list,target_pl_list:o.target_pl_list};n.update_targets(i),e.dots_dict[n.getProps("id")]=i})),P(b(e),"refresh_targets",(function(){for(var t in e.dots_ref){var r=e.dots_ref[t],n={target_list:r.getProps("target_list"),target_pl_list:r.getProps("target_pl_list")};e.dots_dict[t]=n}})),e.state=t,e.setProps=e.setProps.bind(b(e)),e.ref_svg=o.a.createRef(),e.dots_dict={},e.dots_ref={},e.moving_id=null,e.pos_ready=!1,e.pos_list=[],e.max_z=9,console.log("constructed bubble train: ".concat(e.getProps("id"))),x[e.getProps("id")]=b(e),e}return e=s,(r=[{key:"setProps",value:function(t){this.props.setProps?this.props.setProps(t):this.setState(t)}},{key:"getProps",value:function(t){return this.props.setProps?this.props[t]:this.state[t]}},{key:"componentDidMount",value:function(){console.log("mounted bubble train: ".concat(this.getProps("id"))),x[this.getProps("id")]=this,this.setProps({dots:{},dots_ref:{}}),document.addEventListener("keydown",this.do_escape,!1),this.refresh_targets()}},{key:"componentWillUnmount",value:function(){console.log("bubble train unmounted: ".concat(this.getProps("id"))),delete x[this.getProps("id")],document.removeEventListener("keydown",this.do_escape,!1)}},{key:"render",value:function(){var t=this.props.children,e=void 0===t?[]:t;e=Array.isArray(e)?e:[e];var r={width:this.getProps("width"),height:this.getProps("height"),overflow:this.getProps("overflow"),position:this.getProps("position")};return o.a.createElement("div",null,o.a.createElement("svg",{style:{position:"absolute",zIndex:9,height:"100%",width:"100%"},ref:this.ref_svg},this.getProps("path_list").map((function(t){return o.a.createElement("path",{key:d(),d:t.path,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill})}))),o.a.createElement("div",{className:"bubbletrain_panel",id:this.getProps("id"),style:r,onClick:this.hlClick,onMouseMove:this.hlMove,onScroll:this.hlScroll},e))}}])&&h(e.prototype,r),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.Component);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D(n.key),n)}}function S(t,e){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=M(t);if(e){var o=M(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R(this,r)}}function R(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return C(t)}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e,r){return(e=D(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===k(e)?e:String(e)}function U(t,e,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;1==i&&(t.clearRect(0,0,s,a),e=c,r=u),t.beginPath(),t.strokeStyle="black",t.lineWidth=1,t.moveTo(e,r),t.lineTo(n,o),t.stroke(),t.closePath()}function I(t,e){return"x: "+String(t)+", y: "+String(e)}O.defaultProps={children:[],width:"100%",height:"100%",overflow:"auto",position:"absolute",path_list:[]},O.propTypes={id:s.a.string,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),width:s.a.string,height:s.a.string,overflow:s.a.string,position:s.a.string,path_list:s.a.arrayOf(s.a.any)};var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(s,t);var e,r,n,i=E(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),T(C(e=i.call(this,t)),"hlMouseDown",(function(t){e.setProps({x:t.nativeEvent.offsetX}),e.setProps({y:t.nativeEvent.offsetY}),e.setProps({isDrawing:!0}),e.setProps({value:I(e.state.x,e.state.y),x0:t.nativeEvent.offsetX,y0:t.nativeEvent.offsetY})})),T(C(e),"hlMouseMove",(function(t){e.state.isDrawing&&(U(e.ctx,e.state.x,e.state.y,t.nativeEvent.offsetX,t.nativeEvent.offsetY,e.state.refresh,e.w,e.h,e.state.x0,e.state.y0),e.setProps({x:t.nativeEvent.offsetX}),e.setProps({y:t.nativeEvent.offsetY})),e.setProps({value:I(e.state.x,e.state.y)})})),T(C(e),"hlMouseUp",(function(t){e.state.isDrawing&&(console.log(t),console.log(e.c_ref.current),U(e.ctx,e.state.x,e.state.y,t.nativeEvent.offsetX,t.nativeEvent.offsetY,e.state.refresh,e.w,e.h,e.state.x0,e.state.y0),e.setProps({x:0}),e.setProps({y:0}),e.setProps({x0:0}),e.setProps({y0:0}),e.setProps({isDrawing:!1})),e.setProps({value:"here2"})})),T(C(e),"handleChange",(function(){e.setProps({refresh:!e.state.refresh})})),e.state={value:"",isDrawing:!1,x:0,y:0,x0:0,y0:0,refresh:t.refresh},console.log(e.state),e.setProps=e.setProps.bind(C(e)),e.c_ref=o.a.createRef(),e}return e=s,(r=[{key:"componentDidMount",value:function(){this.ctx=this.c_ref.current.getContext("2d"),this.w=this.c_ref.current.width,this.h=this.c_ref.current.height}},{key:"setProps",value:function(t){this.setState(t)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("input",{type:"checkbox",checked:this.state.refresh,onChange:this.handleChange}),"Do Refresh?"),o.a.createElement("div",null,this.state.value),o.a.createElement("canvas",{id:"myPics",width:"500px",height:"500px",onMouseDown:this.hlMouseDown,onMouseUp:this.hlMouseUp,onMouseMove:this.hlMouseMove,ref:this.c_ref}))}}])&&j(e.prototype,r),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.Component);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H(n.key),n)}}function N(t,e){return(N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Y(t);if(e){var o=Y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}function W(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return X(t)}function X(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t,e,r){return(e=H(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H(t){var e=function(t,e){if("object"!==B(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===B(e)?e:String(e)}z.defaultProps={refresh:!1},z.propTypes={refresh:s.a.bool};var $=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(s,t);var e,r,n,i=A(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),q(X(e=i.call(this,t)),"get_parent",(function(){return console.log("draggable panel train_store"),console.log(x),console.log("my id: ".concat(e.getProps("id"),", my parent id: ").concat(e.getProps("parent_id"))),x[e.getProps("parent_id")]})),q(X(e),"hlDragStart",(function(t){var r=e.ref1.current;if(r){var n=r.getBoundingClientRect(),o=n.x,i=n.y,s=o-parseInt(r.style.left),a=i-parseInt(r.style.top);e.setProps({cx0:s}),e.setProps({cy0:a}),e.setProps({x0:t.nativeEvent.offsetX}),e.setProps({y0:t.nativeEvent.offsetY}),e.get_parent().redraw_paths()}})),q(X(e),"hlDrag",(function(t){var r=e.ref1.current;if(r){var n=r.getBoundingClientRect(),o=n.x,i=n.y,s=Math.max(0+e.getProps("edge_offset_x"),o+t.nativeEvent.offsetX-e.getProps("x0")-e.getProps("cx0")),a=Math.max(0+e.getProps("edge_offset_y"),i+t.nativeEvent.offsetY-e.getProps("y0")-e.getProps("cy0")),c="".concat(s,"px"),u="".concat(a,"px");e.setProps({left:c,top:u}),e.get_parent().redraw_paths()}})),q(X(e),"hlDragEnd",(function(t){var r=e.ref1.current;if(r){var n=r.getBoundingClientRect(),o=n.x,i=n.y,s=Math.max(0+e.getProps("edge_offset_x"),o+t.nativeEvent.offsetX-e.getProps("x0")-e.getProps("cx0")),a=Math.max(0+e.getProps("edge_offset_y"),i+t.nativeEvent.offsetY-e.getProps("y0")-e.getProps("cy0")),c="".concat(s,"px"),u="".concat(a,"px");e.setProps({left:c,top:u})}})),q(X(e),"hlMouseDown",(function(t){e.setProps({z_index:e.get_parent().get_z()})})),q(X(e),"hlTitleChange",(function(t){var r=t.target.value;e.setProps({title:r})})),q(X(e),"get_x_pos",(function(t){var r=e.getProps("output_ids").length,n=parseInt(e.getProps("out_dot_distance"));return parseInt(e.getProps("width"))/2-(r-1)*n/2+t*n})),q(X(e),"get_in_dot_pos",(function(t){return[parseInt(e.getProps("left"))+e.get_x_pos(t),parseInt(e.getProps("top"))-20]})),q(X(e),"get_out_dot_pos",(function(t){return[parseInt(e.getProps("left"))+e.get_x_pos(t),parseInt(e.getProps("top"))+parseInt(e.getProps("height"))+20]})),q(X(e),"update_outputs",(function(t,r,n){var o=e.getProps("output_target_lists"),i=e.getProps("output_target_pl_lists");o[t]=r,i[t]=n,e.setProps({output_target_lists:o,output_target_pl_lists:i})})),e.state=t,e.setProps=e.setProps.bind(X(e)),e.ref1=o.a.createRef(),e.resizeObserver=null,e.ref_dh=o.a.createRef(),e.in_refs={},e.out_refs={},e}return e=s,(r=[{key:"setProps",value:function(t){this.props.setProps?this.props.setProps(t):this.setState(t)}},{key:"getProps",value:function(t){return this.props.setProps?this.props[t]:this.state[t]}},{key:"componentDidMount",value:function(){var t=this;this.resizeObserver=new ResizeObserver((function(e){var r=100*(1-(t.getProps("hdr_h")+t.getProps("ftr_h")+t.getProps("ttr_h"))/e[0].contentRect.height);t.setProps({cnt_h:r+"%"});var n=t.ref1.current;n&&(t.setProps({width:n.style.width,height:n.style.height}),t.get_parent().redraw_paths())})),this.resizeObserver.observe(this.ref1.current)}},{key:"componentWillUnmount",value:function(){this.resizeObserver&&this.resizeObserver.disconnect()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this,e=this.props.children,r=void 0===e?[]:e;r=Array.isArray(r)?r:[r];var n=[],i=[],s=this.getProps("ttr_count"),a=this.getProps("ftr_count");s>0&&(n=r.slice(0,s)),a>0&&(i=r.slice(-a)),r=r.slice(s,r.length-a);var c={width:this.getProps("width"),height:this.getProps("height"),left:this.getProps("left"),top:this.getProps("top"),zIndex:this.getProps("z_index")},u=this.getProps("input_ids"),l=[];for(var p in u)l.push({id:u[p],idx:p});var f=[];for(var d in this.getProps("output_ids"))f.push({id:this.getProps("output_ids")[d],output_target_list:this.getProps("output_target_lists")[d],output_target_pl_list:this.getProps("output_target_pl_lists")[d],idx:d});return o.a.createElement("div",null,l.map((function(e){return o.a.createElement(gt,{key:e.id,id:e.id,is_input:!0,stroke:t.getProps("stroke"),strokeWidth:t.getProps("strokeWidth"),color:t.getProps("color"),get_dot_pos:t.get_in_dot_pos,parent:t.get_parent(),panel:t,idx:e.idx})})),f.map((function(e){return o.a.createElement(gt,{key:e.id,id:e.id,target_list:e.output_target_list,target_pl_list:e.output_target_pl_list,is_input:!1,stroke:t.getProps("color"),strokeWidth:t.getProps("strokeWidth"),color:t.getProps("color"),dot_x:t.getProps("top"),dot_y:t.getProps("left"),get_dot_pos:t.get_out_dot_pos,parent:t.get_parent(),panel:t,idx:e.idx})})),o.a.createElement("div",{id:this.getProps("id"),className:"draggable_panel",style:c,ref:this.ref1,onMouseDown:this.hlMouseDown},o.a.createElement("div",{className:"draggable_header",onDrag:this.hlDrag,onDragStart:this.hlDragStart,onDragEnd:this.hlDragEnd,draggable:!0,style:{height:this.getProps("hdr_h"),background:this.getProps("color")},ref:this.ref_dh},o.a.createElement("input",{value:this.getProps("title"),onChange:this.hlTitleChange,className:"draggable_title",style:{fontSize:this.getProps("title_size"),fontFamily:this.getProps("title_font"),color:this.getProps("title_color")}})),o.a.createElement("div",{className:"draggable_topter",style:{height:this.getProps("ttr_h"),background:this.getProps("ttr_color")}},n),o.a.createElement("div",{className:"draggable_content",style:{height:this.getProps("cnt_h"),overflow:this.getProps("cnt_overflow")}},r),o.a.createElement("div",{className:"draggable_footer",style:{height:this.getProps("ftr_h"),background:this.getProps("ftr_color")}},i)))}}])&&L(e.prototype,r),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.Component);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,et(n.key),n)}}function V(t,e){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Z(t);if(e){var o=Z(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return K(this,r)}}function K(t,e){if(e&&("object"===F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Q(t)}function Q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tt(t,e,r){return(e=et(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function et(t){var e=function(t,e){if("object"!==F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===F(e)?e:String(e)}function rt(t,e){return[e[0]-t[0],e[1]-t[1]]}function nt(t){return[-t[0],-t[1]]}function ot(t){return Math.sqrt(st(t,t))}function it(t,e){return t=t.length>0?t.concat([e]):[e]}function st(t,e){return t[0]*e[0]+t[1]*e[1]}function at(t,e){return[t[0]*e,t[1]*e]}function ct(t){if(0==ot(t))return t;if(0==t[1])return function(t){return[t[1],t[0]]}(function(t){return at(t,1/ot(t))}(t));var e=-t[0]/t[1],r=at([1,e],1/ot([1,e]));return t[0]*t[1]>0&&(r=nt(r)),r}function ut(t,e){var r=ct(e);st(t,r)>0&&(r=nt(r));var n,o,i=ot(t),s=function(t,e){var r=ot(t),n=ot(e);if(0==r||0==n)return 0;var o=st(t,e)/(r*n);return o=Math.max(-1,Math.min(1,o)),Math.acos(o),Math.acos(o)}(t,e),a=at(r,2*i*Math.sin(s));return n=t,[(o=a)[0]+n[0],o[1]+n[1]]}function lt(t,e,r){return[t[0]+e[0]*r,t[1]+e[1]*r]}function pt(t,e){return t}function ft(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2,o=nt(rt(t,r)),i=rt(t,e),s=ut(o,i),a=lt(t,pt(nt(s)),n),c=lt(e,pt(o),n);return[a,c]}function dt(t){var e=t.ref1.current.getBoundingClientRect(),r=t.getProps("parent").ref_svg.current.getBoundingClientRect();return[e.x-r.x+e.width/2,e.y-r.y+e.height/2]}$.defaultProps={children:[],ftr_count:0,ttr_count:0,width:"100px",height:"100px",left:"50px",top:"50px",cx0:0,cy0:0,x0:0,y0:0,cnt_h:"100%",hdr_h:20,ttr_h:0,ftr_h:0,input_ids:[],output_ids:[],output_target_lists:[],output_target_pl_lists:[],in_dot_offset:10,in_dot_distance:20,out_dot_offset:10,out_dot_distance:20,edge_offset_y:20,edge_offset_x:0,tooltip:"",strokeWidth:"1.5",color:"#ccc",z_index:9,cnt_overflow:"auto",ftr_color:"white",ttr_color:"white",title:"",title_font:"sans-serif",title_size:"10px",title_color:"white",parent_id:null},$.propTypes={id:s.a.string.isRequired,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),ttr_count:s.a.number,ftr_count:s.a.number,width:s.a.string,height:s.a.string,left:s.a.string,top:s.a.string,cx0:s.a.number,cy0:s.a.number,x0:s.a.number,y0:s.a.number,cnt_h:s.a.oneOfType([s.a.string,s.a.number]),hdr_h:s.a.oneOfType([s.a.string,s.a.number]),ttr_h:s.a.oneOfType([s.a.string,s.a.number]),ftr_h:s.a.oneOfType([s.a.string,s.a.number]),input_ids:s.a.arrayOf(s.a.string),output_ids:s.a.arrayOf(s.a.string),output_target_lists:s.a.arrayOf(s.a.arrayOf(s.a.string)),output_target_pl_lists:s.a.arrayOf(s.a.arrayOf(s.a.arrayOf(s.a.arrayOf(s.a.number)))),in_dot_offset:s.a.number,in_dot_distance:s.a.number,out_dot_offset:s.a.number,out_dot_distance:s.a.number,edge_offset_y:s.a.number,edge_offset_x:s.a.number,tooltip:s.a.string,strokeWidth:s.a.string,color:s.a.string,ftr_color:s.a.string,ttr_color:s.a.string,z_index:s.a.number,cnt_overflow:s.a.string,title:s.a.string,title_font:s.a.string,title_size:s.a.oneOfType([s.a.string,s.a.number]),title_color:s.a.string,parent_id:s.a.string};var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(s,t);var e,r,n,i=G(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),tt(Q(e=i.call(this,t)),"get_complete_path",(function(t){return{stroke:e.getProps("stroke"),strokeWidth:e.getProps("strokeWidth"),fill:e.getProps("fill"),path:e.get_path(t)}})),tt(Q(e),"get_target_offset",(function(t){return dt(e.getProps("parent").dots_ref[t])})),tt(Q(e),"hlClick",(function(t){e.get_moving()?e.getProps("is_input")&&(e.getProps("parent").set_target(Q(e)),e.getProps("parent").stop_moving(),e.getProps("parent").redraw_paths()):e.getProps("is_input")||e.set_moving()})),tt(Q(e),"hlDoubleClick",(function(t){e.getProps("parent").clear_targets(Q(e)),e.getProps("parent").stop_moving(),e.getProps("parent").redraw_paths()})),tt(Q(e),"update_targets",(function(t){if(e.setProps(t),!e.getProps("is_input")){var r=t.target_list,n=t.target_pl_list;e.getProps("panel").update_outputs(e.getProps("idx"),r,n)}})),e.state=t,e.ref1=o.a.createRef(),e.ref_svg=o.a.createRef(),e}return e=s,(r=[{key:"setProps",value:function(t){this.props.setProps?this.props.setProps(t):this.setState(t)}},{key:"getProps",value:function(t){return this.props.setProps?this.props[t]:this.state[t]}},{key:"componentDidMount",value:function(){this.getProps("parent").set_dots_ref(this)}},{key:"componentWillUnmount",value:function(){this.getProps("parent").del_dots_ref(this)}},{key:"is_moving",value:function(){return this.getProps("parent").get_moving()==this.getProps("id")}},{key:"get_moving",value:function(){return this.getProps("parent").get_moving()}},{key:"stop_moving",value:function(){this.getProps("parent").stop_moving()}},{key:"set_moving",value:function(){this.getProps("parent").set_moving(this.getProps("id"))}},{key:"get_path",value:function(t){return function(t){for(var e="",r=0;r<t.length;r++)if(0==r)e+="M ".concat(t[r][0]," ").concat(t[r][1]," ");else if(r==t.length-1)if(2==t.length)e+="L ".concat(t[r][0]," ").concat(t[r][1]," ");else{var n=ft(t[r],t[r-1],t[r-2]);e+="S ".concat(n[0][0]," ").concat(n[0][1]," ").concat(t[r][0]," ").concat(t[r][1]," ")}else if(1==r){var o=ft(t[r-1],t[r],t[r+1]);e+="C ".concat(o[0][0]," ").concat(o[0][1]," ").concat(o[1][0]," ").concat(o[1][1]," ").concat(t[r][0]," ").concat(t[r][1]," ")}else{var i=ft(t[r-1],t[r],t[r+1]);e+="S ".concat(i[1][0]," ").concat(i[1][1]," ").concat(t[r][0]," ").concat(t[r][1]," ")}return e}([dt(this)].concat(t))}},{key:"get_updated_path",value:function(t,e){var r=[],n=null,o=null;for(var i in t)n=t[i],o=e[i],r.push({stroke:this.getProps("stroke"),strokeWidth:this.getProps("strokeWidth"),fill:this.getProps("fill"),path:this.get_path(it(o,this.get_target_offset(n)))});return r}},{key:"get_updated_targets",value:function(t,e){var r=[],n=[],o=this.getProps("target_list"),i=this.getProps("target_pl_list"),s=!1;for(var a in o)o[a]==t?(r.push(o[a]),n.push(e),s=!0):(r.push(o[a]),n.push(i[a]));return s||(r.push(t),n.push(e)),{target_list:r,target_pl_list:n}}},{key:"render",value:function(){var t=this.getProps("dot_x"),e=this.getProps("dot_y");if(this.getProps("get_dot_pos")){var r=this.getProps("get_dot_pos")(this.getProps("idx"));t=r[0]-this.getProps("r"),e=r[1]-this.getProps("r")}return o.a.createElement("div",{ref:this.ref1,style:{position:"absolute",left:"".concat(t,"px"),top:"".concat(e,"px"),background:this.getProps("color"),zIndex:9,width:"".concat(2*this.getProps("r"),"px"),height:"".concat(2*this.getProps("r"),"px"),borderRadius:"".concat(this.getProps("r"),"px")},onClick:this.hlClick,onDoubleClick:this.hlDoubleClick})}}])&&J(e.prototype,r),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.Component);gt.defaultProps={stroke:"#ccc",strokeWidth:"1.5",fill:"none",x:100,y:100,r:8,color:"#ccc",pos_list:[],target_list:[],target_pl_list:[],is_input:!1,dot_x:200,dot_y:200,parent:null,panel:null},gt.propTypes={id:s.a.string.isRequired,stroke:s.a.string,strokeWidth:s.a.string,fill:s.a.string,x:s.a.number,y:s.a.number,r:s.a.number,color:s.a.string,pos_list:s.a.arrayOf(s.a.arrayOf(s.a.number)),target_list:s.a.arrayOf(s.a.string),target_pl_list:s.a.arrayOf(s.a.arrayOf(s.a.arrayOf(s.a.number))),is_input:s.a.bool,dot_x:s.a.number,dot_y:s.a.number,parent:s.a.any,panel:s.a.any},r.d(e,"BubbleTrain",(function(){return O})),r.d(e,"DrawCanvas",(function(){return z})),r.d(e,"DraggablePanel",(function(){return $})),r.d(e,"Connector",(function(){return gt}))}]);
//# sourceMappingURL=bubble_train.min.js.map
//# sourceMappingURL=bubble_train.min.js.map