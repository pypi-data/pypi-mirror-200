import{r as M,o as re,c as C,a as Ze,g as G,u as Ee,t as J,b as l,m as j,d as F,e as Ie,f as Xe,s as w,h as p,i as S,w as u,j as D,k as e,l as T,n as b,p as $,q as A,v as k,x as ie,F as ee,y as ne,z as H,A as Ne,C as Ke,B as fe,D as ze,E as ye,G as Je,H as et,I as tt,J as at,T as Le,K as nt,L as it,M as X,P as Ve,N as ce,O as De,Q as Te,R as lt,_ as ot,S as st}from"./index-1c74b571.js";import{u as Q,V as E,a as B,b as Oe,m as qe,c as We,d as Ue,e as ue,f as He,g as ve,h as Ye,i as je,j as rt,t as ut,k as dt}from"./VBtn-306d1a5a.js";import{V as ct}from"./VTooltip-a795f4eb.js";import{V as te,a as mt}from"./forwardRefs-03e862ca.js";import{V as se}from"./VMenu-c65b86e6.js";import{m as vt,f as pt,V as ft,a as yt,b as gt}from"./VToolbar-64dff615.js";import{m as ge,u as he,a as ht,b as _t,c as bt}from"./layout-1a9778f9.js";import{V as ae,a as wt,b as me}from"./VCardText-075e2ead.js";/* empty css              */import{g as _e,t as kt,f as Se,_ as At,a as xt,b as $e}from"./MediaItemThumb.vue_vue_type_style_index_0_lang-e0f4d409.js";import{V as pe,a as Ct,b as Vt,c as Tt,d as St}from"./VExpansionPanel-0ff86bd8.js";import{V as K}from"./VDivider-5c1f311f.js";import{V as $t,a as Re,b as Rt}from"./VCard-301b9769.js";import{i as Pt,a as Mt,g as Pe,_ as Bt}from"./_plugin-vue_export-helper-a8c3528c.js";import{_ as Et}from"./ProviderIcon.vue_vue_type_script_setup_true_lang-e9e0e523.js";import"./VLabel-e18201d9.js";function be(){const t=M(!1);return re(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:C(()=>t.value?void 0:{transition:"none !important"}),isBooted:Ze(t)}}const It=G()({name:"VAppBar",props:{modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},...vt(),...ge(),height:{type:[Number,String],default:64}},emits:{"update:modelValue":t=>!0},setup(t,c){let{slots:s}=c;const o=M(),n=Ee(t,"modelValue"),a=C(()=>{var v,i;const y=((v=o.value)==null?void 0:v.contentHeight)??0,d=((i=o.value)==null?void 0:i.extensionHeight)??0;return y+d}),{ssrBootStyles:r}=be(),{layoutItemStyles:g}=he({id:t.name,order:C(()=>parseInt(t.order,10)),position:J(t,"location"),layoutSize:a,elementSize:a,active:n,absolute:J(t,"absolute")});return Q(()=>{const[y]=pt(t);return l(ft,j({ref:o,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"}],style:{...g.value,height:void 0,...r.value}},y),s)}),{}}}),Nt=G()({name:"VAppBarTitle",props:yt(),setup(t,c){let{slots:s}=c;return Q(()=>l(gt,j(t,{class:"v-app-bar-title"}),s)),{}}}),zt={key:0,style:{opacity:"0.5"}},Lt={class:"listitem-actions"},Dt={key:0},Ot={key:1},qt=F({__name:"AppBar",setup(t){const c=Ie(),{t:s}=Xe(),o=C(()=>{if(c.currentRoute.value.name=="home")return{mainTitle:s("mass"),subTitle:s("home")};if(c.currentRoute.value.path.includes("settings"))return{mainTitle:s("mass"),subTitle:s("settings.settings")};if(c.currentRoute.value.name!="home"&&!w.topBarTitle)return{mainTitle:s("mass"),mainLink:()=>{c.push({name:"home"})},subTitle:s(c.currentRoute.value.name.toString())};if(c.currentRoute.value.name!="home"&&w.topBarTitle){if(n.value&&c.currentRoute.value.path.includes(n.value.path))return{mainTitle:s(n.value.name.replace("home","mass")),mainLink:()=>{a()},subTitle:w.topBarTitle};const r=c.currentRoute.value.path.split("/")[1];return{mainTitle:s(r),mainLink:()=>{c.push(`/${r}`)},subTitle:w.topBarTitle}}return c.currentRoute.value?{mainTitle:s(c.currentRoute.value.name.toString())}:{mainTitle:s("mass")}}),n=C(()=>{if(w.prevRoutes.length>0)return w.prevRoutes[w.prevRoutes.length-1]}),a=function(){const r=w.prevRoutes.pop();r&&(r.params.backnav="true",c.replace(r).then(()=>{setTimeout(()=>{window.scrollTo(0,r.meta.scrollPos||0)},400)}))};return(r,g)=>(p(),S(It,{color:"grey-darken-3",density:"compact",style:{height:"56px"},elevation:2},{prepend:u(()=>[l(B,{style:{"margin-left":"-8px","margin-right":"-20px"},variant:"plain",onClick:g[0]||(g[0]=y=>e(w).showNavigationMenu=!e(w).showNavigationMenu)},{default:u(()=>[l(E,{size:"40"},{default:u(()=>[D(" mdi-playlist-play ")]),_:1})]),_:1})]),append:u(()=>[T("div",Lt,[l(ct,{location:"top end",origin:"end center"},{activator:u(({props:y})=>[e(b).syncTasks.value.length>0||e(b).fetchesInProgress.value.length>0?(p(),S(Oe,j({key:0,indeterminate:""},y),null,16)):$("",!0)]),default:u(()=>[e(b).syncTasks.value.length>0?(p(),A("span",Dt,k(r.$t("sync_running")),1)):(p(),A("span",Ot,k(r.$t("loading")),1))]),_:1}),l(se,{location:"bottom end"},{activator:u(({props:y})=>[e(w).topBarContextMenuItems.length>0?(p(),S(B,j({key:0,icon:"mdi-dots-vertical",style:{"margin-right":"-6px"}},y,{variant:"plain"}),null,16)):$("",!0)]),default:u(()=>[l(te,null,{default:u(()=>[(p(!0),A(ee,null,ie(e(w).topBarContextMenuItems,(y,d)=>(p(),S(ae,{key:d,title:r.$t(y.label,y.labelArgs),onClick:v=>y.action?y.action():""},{prepend:u(()=>[l(wt,{icon:y.icon},null,8,["icon"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})])]),default:u(()=>[l(Nt,null,{default:u(()=>[T("span",{style:{cursor:"pointer"},onClick:g[1]||(g[1]=(...y)=>e(o).mainLink&&e(o).mainLink(...y))},k(e(o).mainTitle),1),e(o).subTitle?(p(),A("span",zt," | "+k(e(o).subTitle),1)):$("",!0)]),_:1})]),_:1}))}});function Wt(t){let{rootEl:c,isSticky:s,layoutItemStyles:o}=t;const n=M(!1),a=M(0),r=C(()=>{const d=typeof n.value=="boolean"?"top":n.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[d]:ne(a.value)}:{top:o.value.top}]});re(()=>{H(s,d=>{d?window.addEventListener("scroll",y,{passive:!0}):window.removeEventListener("scroll",y)},{immediate:!0})}),Ne(()=>{document.removeEventListener("scroll",y)});let g=0;function y(){const d=g>window.scrollY?"up":"down",v=c.value.getBoundingClientRect(),i=parseFloat(o.value.top??0),m=window.scrollY-Math.max(0,a.value-i),_=v.height+Math.max(a.value,i)-window.scrollY-window.innerHeight;v.height<window.innerHeight-i?(n.value="top",a.value=i):d==="up"&&n.value==="bottom"||d==="down"&&n.value==="top"?(a.value=window.scrollY+v.top,n.value=!0):d==="down"&&_<=0?(a.value=0,n.value="bottom"):d==="up"&&m<=0&&(a.value=v.top+m,n.value="top"),g=window.scrollY}return{isStuck:n,stickyStyles:r}}const Ut=100,Ht=20;function Me(t){const c=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*c}function Be(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let c=0;for(let s=t.length-1;s>0;s--){if(t[s].t===t[s-1].t)continue;const o=Me(c),n=(t[s].d-t[s-1].d)/(t[s].t-t[s-1].t);c+=(n-o)*Math.abs(n),s===t.length-1&&(c*=.5)}return Me(c)*1e3}function Yt(){const t={};function c(n){Array.from(n.changedTouches).forEach(a=>{(t[a.identifier]??(t[a.identifier]=new Ke(Ht))).push([n.timeStamp,a])})}function s(n){Array.from(n.changedTouches).forEach(a=>{delete t[a.identifier]})}function o(n){var d;const a=(d=t[n])==null?void 0:d.values().reverse();if(!a)throw new Error(`No samples for touch id ${n}`);const r=a[0],g=[],y=[];for(const v of a){if(r[0]-v[0]>Ut)break;g.push({t:v[0],d:v[1].clientX}),y.push({t:v[0],d:v[1].clientY})}return{x:Be(g),y:Be(y),get direction(){const{x:v,y:i}=this,[m,_]=[Math.abs(v),Math.abs(i)];return m>_&&v>=0?"right":m>_&&v<=0?"left":_>m&&i>=0?"down":_>m&&i<=0?"up":jt()}}}return{addMovement:c,endTouch:s,getVelocity:o}}function jt(){throw new Error}function Ft(t){let{isActive:c,isTemporary:s,width:o,touchless:n,position:a}=t;re(()=>{window.addEventListener("touchstart",O,{passive:!0}),window.addEventListener("touchmove",W,{passive:!1}),window.addEventListener("touchend",q,{passive:!0})}),Ne(()=>{window.removeEventListener("touchstart",O),window.removeEventListener("touchmove",W),window.removeEventListener("touchend",q)});const r=C(()=>["left","right"].includes(a.value)),{addMovement:g,endTouch:y,getVelocity:d}=Yt();let v=!1;const i=M(!1),m=M(0),_=M(0);let x;function R(V,f){return(a.value==="left"?V:a.value==="right"?document.documentElement.clientWidth-V:a.value==="top"?V:a.value==="bottom"?document.documentElement.clientHeight-V:Z())-(f?o.value:0)}function Y(V){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const h=a.value==="left"?(V-_.value)/o.value:a.value==="right"?(document.documentElement.clientWidth-V-_.value)/o.value:a.value==="top"?(V-_.value)/o.value:a.value==="bottom"?(document.documentElement.clientHeight-V-_.value)/o.value:Z();return f?Math.max(0,Math.min(1,h)):h}function O(V){if(n.value)return;const f=V.changedTouches[0].clientX,h=V.changedTouches[0].clientY,P=25,N=a.value==="left"?f<P:a.value==="right"?f>document.documentElement.clientWidth-P:a.value==="top"?h<P:a.value==="bottom"?h>document.documentElement.clientHeight-P:Z(),z=c.value&&(a.value==="left"?f<o.value:a.value==="right"?f>document.documentElement.clientWidth-o.value:a.value==="top"?h<o.value:a.value==="bottom"?h>document.documentElement.clientHeight-o.value:Z());(N||z||c.value&&s.value)&&(v=!0,x=[f,h],_.value=R(r.value?f:h,c.value),m.value=Y(r.value?f:h),y(V),g(V))}function W(V){const f=V.changedTouches[0].clientX,h=V.changedTouches[0].clientY;if(v){if(!V.cancelable){v=!1;return}const N=Math.abs(f-x[0]),z=Math.abs(h-x[1]);(r.value?N>z&&N>3:z>N&&z>3)?(i.value=!0,v=!1):(r.value?z:N)>3&&(v=!1)}if(!i.value)return;V.preventDefault(),g(V);const P=Y(r.value?f:h,!1);m.value=Math.max(0,Math.min(1,P)),P>1?_.value=R(r.value?f:h,!0):P<0&&(_.value=R(r.value?f:h,!1))}function q(V){if(v=!1,!i.value)return;g(V),i.value=!1;const f=d(V.changedTouches[0].identifier),h=Math.abs(f.x),P=Math.abs(f.y);(r.value?h>P&&h>400:P>h&&P>3)?c.value=f.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||Z()):c.value=m.value>.5}const I=C(()=>i.value?{transform:a.value==="left"?`translateX(calc(-100% + ${m.value*o.value}px))`:a.value==="right"?`translateX(calc(100% - ${m.value*o.value}px))`:a.value==="top"?`translateY(calc(-100% + ${m.value*o.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${m.value*o.value}px))`:Z(),transition:"none"}:void 0);return{isDragging:i,dragProgress:m,dragStyles:I}}function Z(){throw new Error}const Gt=["start","end","left","right","top","bottom"],Fe=G()({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>Gt.includes(t)},sticky:Boolean,...qe(),...We(),...ge(),...Ue(),...ue({tag:"nav"}),...fe()},emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,c){let{attrs:s,emit:o,slots:n}=c;const{isRtl:a}=ze(),{themeClasses:r}=ye(t),{borderClasses:g}=He(t),{backgroundColorClasses:y,backgroundColorStyles:d}=ve(J(t,"color")),{elevationClasses:v}=Ye(t),{mobile:i}=Je(),{roundedClasses:m}=je(t),_=rt(),x=Ee(t,"modelValue",null,L=>!!L),{ssrBootStyles:R}=be(),Y=M(),O=M(!1),W=C(()=>t.rail&&t.expandOnHover&&O.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),q=C(()=>ut(t.location,a.value)),I=C(()=>!t.permanent&&(i.value||t.temporary)),V=C(()=>t.sticky&&!I.value&&q.value!=="bottom");t.expandOnHover&&t.rail!=null&&H(O,L=>o("update:rail",!L)),t.disableResizeWatcher||H(I,L=>!t.permanent&&et(()=>x.value=!L)),!t.disableRouteWatcher&&_&&H(_.currentRoute,()=>I.value&&(x.value=!1)),H(()=>t.permanent,L=>{L&&(x.value=!0)}),tt(()=>{t.modelValue!=null||I.value||(x.value=t.permanent||!i.value)});const{isDragging:f,dragProgress:h,dragStyles:P}=Ft({isActive:x,isTemporary:I,width:W,touchless:J(t,"touchless"),position:q}),N=C(()=>{const L=I.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):W.value;return f.value?L*h.value:L}),{layoutItemStyles:z,layoutRect:U,layoutItemScrimStyles:le}=he({id:t.name,order:C(()=>parseInt(t.order,10)),position:q,layoutSize:N,elementSize:W,active:C(()=>x.value||f.value),disableTransitions:C(()=>f.value),absolute:C(()=>t.absolute||V.value&&typeof de.value!="string")}),{isStuck:de,stickyStyles:oe}=Wt({rootEl:Y,isSticky:V,layoutItemStyles:z}),we=ve(C(()=>typeof t.scrim=="string"?t.scrim:null)),Qe=C(()=>({...f.value?{opacity:h.value*.2,transition:"none"}:void 0,...U.value?{left:ne(U.value.left),right:ne(U.value.right),top:ne(U.value.top),bottom:ne(U.value.bottom)}:void 0,...le.value}));return at({VList:{bgColor:"transparent"}}),Q(()=>{const L=n.image||t.image;return l(ee,null,[l(t.tag,j({ref:Y,onMouseenter:()=>O.value=!0,onMouseleave:()=>O.value=!1,class:["v-navigation-drawer",`v-navigation-drawer--${q.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":O.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":I.value,"v-navigation-drawer--active":x.value,"v-navigation-drawer--sticky":V.value},r.value,y.value,g.value,v.value,m.value],style:[d.value,z.value,P.value,R.value,oe.value]},s),{default:()=>{var ke,Ae,xe,Ce;return[L&&l("div",{key:"image",class:"v-navigation-drawer__img"},[n.image?(ke=n.image)==null?void 0:ke.call(n,{image:t.image}):l("img",{src:t.image,alt:""},null)]),n.prepend&&l("div",{class:"v-navigation-drawer__prepend"},[(Ae=n.prepend)==null?void 0:Ae.call(n)]),l("div",{class:"v-navigation-drawer__content"},[(xe=n.default)==null?void 0:xe.call(n)]),n.append&&l("div",{class:"v-navigation-drawer__append"},[(Ce=n.append)==null?void 0:Ce.call(n)])]}}),l(Le,{name:"fade-transition"},{default:()=>[I.value&&(f.value||x.value)&&!!t.scrim&&l("div",{class:["v-navigation-drawer__scrim",we.backgroundColorClasses.value],style:[Qe.value,we.backgroundColorStyles.value],onClick:()=>x.value=!1},null)]})])}),{isStuck:de}}}),Qt=T("div",{style:{height:"20px"}},null,-1),Zt=F({__name:"NavigationMenu",setup(t){const c=[{label:"home",icon:"mdi-home",path:"/home"},{label:"search",icon:"mdi-magnify",path:"/search"},{label:"artists",icon:"mdi-account-music",path:"/artists"},{label:"albums",icon:"mdi-album",path:"/albums"},{label:"tracks",icon:"mdi-file-music",path:"/tracks"},{label:"radios",icon:"mdi-radio",path:"/radios"},{label:"playlists",icon:"mdi-playlist-music",path:"/playlists"},{label:"browse",icon:"mdi-folder",path:"/browse"},{label:"settings.settings",icon:"mdi-cog",path:"/settings"}];return(s,o)=>(p(),S(Fe,{app:"",permanent:!s.$vuetify.display.mobile,rail:!s.$vuetify.display.mobile&&!e(w).showNavigationMenu,"model-value":s.$vuetify.display.mobile&&e(w).showNavigationMenu||!s.$vuetify.display.mobile,width:220,"onUpdate:modelValue":o[0]||(o[0]=n=>{s.$vuetify.display.mobile&&(e(w).showNavigationMenu=n)})},{default:u(()=>[Qt,l(te,{lines:"one",density:"compact",nav:""},{default:u(()=>[(p(),A(ee,null,ie(c,n=>l(ae,{key:n.path,nav:"",density:"compact",height:15,title:s.$t(n.label),"prepend-icon":n.icon,to:n.path},null,8,["title","prepend-icon","to"])),64))]),_:1})]),_:1},8,["permanent","rail","model-value"]))}}),Xt=G()({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...ue()},setup(t,c){let{slots:s}=c;return Q(()=>l(t.tag,{class:["v-container",{"v-container--fluid":t.fluid}]},s)),{}}});const Kt=G()({name:"VMain",props:{scrollable:Boolean,...ue({tag:"main"})},setup(t,c){let{slots:s}=c;const{mainStyles:o}=ht(),{ssrBootStyles:n}=be();return Q(()=>l(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable}],style:[o.value,n.value]},{default:()=>{var a,r;return[t.scrollable?l("div",{class:"v-main__scroller"},[(a=s.default)==null?void 0:a.call(s)]):(r=s.default)==null?void 0:r.call(s)]}})),{}}}),Jt=F({__name:"View",setup(t){return(c,s)=>{const o=it("router-view");return p(),S(Kt,{id:"cont"},{default:u(()=>[l(Zt),l(Xt,{fluid:"",style:{"padding-left":"0","padding-right":"0"}},{default:u(()=>[l(o,{app:""},{default:u(({Component:n})=>[l(Le,{name:"fade",mode:"out-in"},{default:u(()=>[(p(),S(nt(n)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}}),ea=""+new URL("crossfade-ba51f69a.png",import.meta.url).href,ta="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAnElEQVRYw+2UwQ6AMAhDwfjh+OXzZrgslqxjW8K7GWdtRqlIUYyh/qG1Zt8LVYuKzTDUnCGNy41zrfhpGRrhZgn5/HmiWdzuhsrQH7QMicjDENmuGKEbQjaotiwLaGSZeUIzZB2jhnwfAdqyzFAze+gXxPSZxcgaB6JDa+rUDLG2DNFJ3TLkzDlN3bveGWc83ZFlctTIKOVWFCt5AYSDaENMYFhMAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA0LTE1VDEzOjExOjE0KzAwOjAwADepDgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNC0xNVQxMzoxMToxNCswMDowMHFqEbIAAAAASUVORK5CYII=",aa={class:"text-body-2",style:{position:"absolute","margin-top":"3px"}},na={class:"text-caption",style:{position:"absolute",width:"60px","text-align":"center","margin-left":"0px"}},ia={class:"text-body-2"},la={class:"text-body-2",style:{position:"absolute","margin-top":"3px"}},oa={key:0,class:"syncbtn"},sa={key:1,class:"syncbtn"},ra={class:"text-caption",style:{position:"absolute",width:"60px","text-align":"center","margin-left":"0px"}},Ge=F({__name:"VolumeControl",props:{player:null},setup(t){const c=function(o){var a;const n=[];o.type!=Ve.GROUP&&n.push(o);for(const r of o.group_childs){const g=(a=b)==null?void 0:a.players[r];g&&g.available&&n.push(g)}return n.sort((r,g)=>r.display_name.toUpperCase()>g.display_name.toUpperCase()?1:-1),n},s=function(o,n){if(o.type!=Ve.GROUP&&o.group_childs.length>0)for(const a of c(o))b.sendCommand("players/cmd/power",{player_id:a.player_id,powered:n});b.playerCommandPower(o.player_id,n)};return(o,n)=>(p(),S(te,{style:{overflow:"hidden"},lines:"two"},{default:u(()=>[t.player.group_childs.length>0?(p(),A("div",{key:0,class:"volumerow",style:X(t.player.powered?"opacity: 0.75":"opacity: 0.5")},[l(B,{icon:"",variant:"plain",width:"60",height:"30",size:"x-large",onClick:n[0]||(n[0]=a=>s(t.player,!t.player.powered))},{default:u(()=>[l(E,{icon:"mdi-power"})]),_:1}),T("span",aa,k(e(_e)(t.player,30)),1),T("div",na,k(t.player.group_volume),1),l(pe,{lazy:"",density:"compact",step:"2","track-size":"2","thumb-size":"10","thumb-label":"",disabled:!t.player.powered,"model-value":Math.round(t.player.group_volume),style:{"margin-left":"5px"},"onUpdate:modelValue":n[1]||(n[1]=a=>e(b).playerCommandGroupVolume(t.player.player_id,a))},null,8,["disabled","model-value"])],4)):$("",!0),t.player.group_childs.length>0?(p(),S(K,{key:1,style:{"margin-top":"10px","margin-bottom":"10px"}})):$("",!0),(p(!0),A(ee,null,ie(c(t.player),a=>(p(),A("div",{key:a.player_id,class:"volumerow",style:X(a.powered?"opacity: 0.75":"opacity: 0.5")},[T("span",ia,[l(B,{icon:"",variant:"plain",width:"60",height:"30",size:"x-large",onClick:r=>e(b).playerCommandPowerToggle(a.player_id)},{default:u(()=>[l(E,{icon:a.volume_muted?"mdi-volume-off":"mdi-power"},null,8,["icon"])]),_:2},1032,["onClick"]),T("span",la,k(e(kt)(a.display_name,27)),1),!a.synced_to&&!a.group_childs.length&&Object.values(e(b).players).filter(r=>!r.synced_to&&r.can_sync_with.includes(a.player_id)).length>0?(p(),A("div",oa,[l(se,{location:"bottom end",style:{"z-index":"999999"}},{activator:u(({props:r})=>[l(B,j({icon:""},r,{variant:"plain"}),{default:u(()=>[l(E,null,{default:u(()=>[D("mdi-link-variant")]),_:1})]),_:2},1040)]),default:u(()=>[l(te,null,{default:u(()=>[l($t,null,{default:u(()=>[D(k(o.$t("sync_player_to")),1)]),_:1}),(p(!0),A(ee,null,ie(Object.values(e(b).players).filter(r=>!r.synced_to&&r.can_sync_with.includes(a.player_id)),r=>(p(),S(ae,{key:r.player_id,title:r.display_name,onClick:g=>e(b).playerCommandSync(a.player_id,r.player_id)},null,8,["title","onClick"]))),128)),l(K)]),_:2},1024)]),_:2},1024)])):$("",!0),a.synced_to?(p(),A("div",sa,[l(B,{icon:"",variant:"plain",onClick:r=>e(b).playerCommandUnSync(a.player_id)},{default:u(()=>[l(E,null,{default:u(()=>[D("mdi-link-variant-off")]),_:1})]),_:2},1032,["onClick"])])):$("",!0)]),T("div",ra,k(a.volume_level),1),l(pe,{lazy:"",density:"compact",step:"2","track-size":"2","thumb-size":"10","thumb-label":"",disabled:!a.powered,"model-value":Math.round(a.volume_level),style:{"margin-left":"5px"},"onUpdate:modelValue":r=>e(b).playerCommandVolumeSet(a.player_id,r)},null,8,["disabled","model-value","onUpdate:modelValue"])],4))),128))]),_:1}))}});const ua=G()({name:"VFooter",props:{app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...qe(),...We(),...ge(),...Ue(),...ue({tag:"footer"}),...fe()},setup(t,c){let{slots:s}=c;const{themeClasses:o}=ye(t),{backgroundColorClasses:n,backgroundColorStyles:a}=ve(J(t,"color")),{borderClasses:r}=He(t),{elevationClasses:g}=Ye(t),{roundedClasses:y}=je(t),d=M(32),{resizeRef:v}=dt(_=>{_.length&&(d.value=_[0].target.clientHeight)}),i=C(()=>t.height==="auto"?d.value:parseInt(t.height,10)),{layoutItemStyles:m}=he({id:t.name,order:C(()=>parseInt(t.order,10)),position:C(()=>"bottom"),layoutSize:i,elementSize:C(()=>t.height==="auto"?void 0:i.value),active:C(()=>t.app),absolute:J(t,"absolute")});return Q(()=>l(t.tag,{ref:v,class:["v-footer",o.value,n.value,r.value,g.value,y.value],style:[a.value,t.app?m.value:void 0]},s)),{}}}),da={class:"listitem-thumb"},ca={key:0},ma={key:1},va={key:1},pa={key:2},fa={key:3},ya={key:4},ga={class:"listitem-actions"},ha={class:"text-h5",style:{padding:"10px"}},_a={style:{height:"50px",display:"flex","align-items":"center"}},ba={style:{height:"50px",display:"flex","align-items":"center"}},wa=["src"],ka={key:0,style:{height:"50px",display:"flex","align-items":"center"}},Aa={key:1,style:{height:"50px",display:"flex","align-items":"center"}},xa={key:1,class:"mediadetails-time text-caption"},Ca={key:0,style:{width:"100%",height:"5px","padding-bottom":"20px","margin-top":"-10px"}},Va={class:"mediacontrols"},Ta={key:0,class:"mediacontrols-left"},Sa={key:0},$a={key:1},Ra={class:"text-subtitle-1"},Pa=F({__name:"PlayerOSD",setup(t){const c=Ie(),s=M(),o=M(!1),n=C(()=>{if(w.selectedPlayer)return b.queues[w.selectedPlayer.active_queue]}),a=C(()=>{if(n.value)return n.value.current_item}),r=C(()=>a.value?Se(d.value):"0:00"),g=C(()=>{if(!a.value)return"0:00";const i=a.value.duration;return Se(i)}),y=C(()=>{var i,m;return(m=(i=n.value)==null?void 0:i.current_item)==null?void 0:m.streamdetails}),d=C(()=>n.value?n.value.elapsed_time:0),v=function(i){c.push({name:i.media_type,params:{itemId:i.item_id,provider:i.provider}})};return H(()=>{var i;return(i=a.value)==null?void 0:i.queue_item_id},async()=>{var i;(i=a.value)!=null&&i.media_item&&(s.value=await $e(a.value.media_item,Te.FANART)||await $e(a.value.media_item,Te.THUMB))}),(i,m)=>(p(),S(ua,{bottom:"",fixed:"",class:"d-flex flex-column",style:{width:"100%","border-top-style":"ridge"},elevation:"5",app:""},{default:u(()=>{var _,x,R,Y,O,W,q,I,V;return[l(K),l(me,{class:"bg-image",width:"100%",cover:"",src:s.value,gradient:i.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.80), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.85), rgba(255,255,255,.65)",style:{position:"absolute","background-size":"100%",padding:"0","margin-top":"-10px"}},null,8,["src","gradient"]),l(ae,{style:{height:"60px",width:"100%","margin-top":"-5px","padding-bottom":"30px","padding-top":"5px"},lines:"two"},{prepend:u(()=>[T("div",da,[e(a)?(p(),S(At,{key:0,item:e(a).media_item||e(a),width:50,style:{cursor:"pointer"},onClick:m[0]||(m[0]=f=>{var h;return(h=e(a))!=null&&h.media_item?v(e(a).media_item):""})},null,8,["item"])):(p(),S(me,{key:1,height:"50",src:e(Pt),style:{opacity:"50%"}},null,8,["src"]))])]),title:u(()=>[e(a)&&e(a).media_item?(p(),A("span",{key:0,style:{cursor:"pointer"},onClick:m[1]||(m[1]=f=>{var h;return(h=e(a))!=null&&h.media_item?v(e(a).media_item):""})},[D(k(e(a).media_item.name)+" ",1),"version"in e(a).media_item&&e(a).media_item.version?(p(),A("span",ca,"("+k(e(a).media_item.version)+")",1)):$("",!0)])):e(a)?(p(),A("span",ma,k(e(a).name),1)):$("",!0)]),subtitle:u(()=>{var f,h,P,N,z,U,le;return[e(a)&&((f=e(a).media_item)==null?void 0:f.media_type)==e(ce).TRACK&&"album"in e(a).media_item&&e(a).media_item.album?(p(),A("div",{key:0,style:{cursor:"pointer"},onClick:m[2]||(m[2]=de=>{var oe;return(oe=e(a))!=null&&oe.media_item?v(e(a).media_item):""})},k(e(xt)(e(a).media_item.artists))+" â€¢ "+k(e(a).media_item.album.name),1)):e(a)&&e(a).media_item&&"artists"in e(a).media_item&&e(a).media_item.artists.length>0?(p(),A("div",va,k(e(a).media_item.artists[0].name),1)):(P=(h=e(a))==null?void 0:h.streamdetails)!=null&&P.stream_title?(p(),A("div",pa,k((z=(N=e(a))==null?void 0:N.streamdetails)==null?void 0:z.stream_title),1)):e(a)&&((U=e(a).media_item)!=null&&U.metadata.description)?(p(),A("div",fa,k(e(a).media_item.metadata.description),1)):e(a)?$("",!0):(p(),A("div",ya,k((le=e(n))==null?void 0:le.display_name),1))]}),append:u(()=>{var f;return[T("div",ga,[e(y)?(p(),S(se,{key:0,location:"bottom end"},{activator:u(({props:h})=>[l(me,j({contain:"",src:e(y).bit_depth>16?e(Mt):e(Pe)(e(y).content_type),height:"25",style:i.$vuetify.theme.current.dark?"":"filter: invert(100%)",class:"v-list-item-subtitle mediadetails-streamdetails"},h),null,16,["src","style"])]),default:u(()=>[l(Re,{class:"mx-auto",width:"300"},{default:u(()=>[l(te,{style:{overflow:"hidden"}},{default:u(()=>[T("span",ha,k(i.$t("stream_details")),1),l(K),T("div",_a,[l(Et,{domain:e(y).provider,size:"35px",style:{"object-fit":"contain","margin-left":"10px","margin-right":"5px"}},null,8,["domain"]),D(" "+k(i.$t("providers."+e(y).provider)),1)]),T("div",ba,[T("img",{height:"30",width:"50",src:e(Pe)(e(y).content_type),style:X(i.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,12,wa),D(" "+k(e(y).sample_rate/1e3)+" kHz / "+k(e(y).bit_depth)+" bits ",1)]),e(n)&&e(n).crossfade_enabled?(p(),A("div",ka,[T("img",{height:"30",width:"50",contain:"",src:ea,style:X(i.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,4),D(" "+k(i.$t("crossfade_enabled")),1)])):$("",!0),e(y).gain_correct?(p(),A("div",Aa,[T("img",{height:"30",width:"50",contain:"",src:ta,style:X(i.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,4),D(" "+k(e(y).gain_correct)+" dB ",1)])):$("",!0)]),_:1})]),_:1})]),_:1})):$("",!0),!i.$vuetify.display.mobile&&e(y)&&e(a)&&((f=e(a).media_item)==null?void 0:f.media_type)!==e(ce).RADIO?(p(),A("div",xa,k(e(r))+" / "+k(e(g)),1)):$("",!0)])]}),_:1}),e(a)?(p(),A("div",Ca,[l(pe,{"model-value":e(d),height:"3",color:"primary",min:0,max:e(a).duration,"thumb-size":4,style:{"margin-left":"0","margin-right":"0"},disabled:!e(a)||((_=e(a).media_item)==null?void 0:_.media_type)!=e(ce).TRACK,"onUpdate:modelValue":m[3]||(m[3]=f=>{var h;return e(b).queueCommandSeek(((h=e(n))==null?void 0:h.queue_id)||"",Math.round(f))})},null,8,["model-value","max","disabled"])])):$("",!0),T("div",Va,[e(n)&&e(n).available?(p(),A("div",Ta,[l(B,{small:"",icon:"",variant:"plain",disabled:!e(n)||!((x=e(n))!=null&&x.active)||((R=e(n))==null?void 0:R.items)==0,onClick:m[4]||(m[4]=f=>e(b).queueCommandPrevious(e(n).queue_id))},{default:u(()=>[l(E,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),e(n)&&((Y=e(n))!=null&&Y.active)?(p(),S(B,{key:0,icon:"","x-large":"",variant:"plain",disabled:e(n)&&((O=e(n))==null?void 0:O.items)==0,onClick:m[5]||(m[5]=f=>e(b).queueCommandPlayPause(e(n).queue_id))},{default:u(()=>[l(E,{size:"50"},{default:u(()=>{var f;return[D(k(((f=e(n))==null?void 0:f.state)=="playing"?"mdi-pause":"mdi-play"),1)]}),_:1})]),_:1},8,["disabled"])):((W=e(w).selectedPlayer)==null?void 0:W.state)==e(De).PLAYING?(p(),S(B,{key:1,icon:"","x-large":"",variant:"plain",onClick:m[6]||(m[6]=f=>e(b).queueCommandStop(e(n).queue_id))},{default:u(()=>[l(E,{size:"50"},{default:u(()=>[D(" mdi-stop ")]),_:1})]),_:1})):(p(),S(B,{key:2,icon:"","x-large":"",variant:"plain",disabled:e(n)&&((q=e(n))==null?void 0:q.items)==0,onClick:m[7]||(m[7]=f=>e(b).queueCommandPlay(e(n).queue_id))},{default:u(()=>[l(E,{size:"50"},{default:u(()=>[D(" mdi-play ")]),_:1})]),_:1},8,["disabled"])),l(B,{icon:"",small:"",variant:"plain",disabled:!e(n)||!((I=e(n))!=null&&I.active)||((V=e(n))==null?void 0:V.items)==0,onClick:m[8]||(m[8]=f=>e(b).queueCommandNext(e(n).queue_id))},{default:u(()=>[l(E,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])):$("",!0),l(B,{icon:"",variant:"plain",class:"mediacontrols-right",height:"50",width:"80",onClick:m[9]||(m[9]=f=>e(w).showPlayersMenu=!0)},{default:u(()=>[l(E,{icon:"mdi-speaker"}),e(n)?(p(),A("div",Sa,k(e(_e)(e(b).players[e(n).queue_id])),1)):$("",!0)]),_:1}),!i.$vuetify.display.mobile&&e(n)?(p(),A("div",$a,[l(se,{modelValue:o.value,"onUpdate:modelValue":m[11]||(m[11]=f=>o.value=f),location:"bottom end","close-on-content-click":!1},{activator:u(({props:f})=>[l(B,j({icon:"",variant:"plain"},f,{class:"mediacontrols-right",height:"50",width:"70"}),{default:u(()=>{var h;return[l(E,{icon:"mdi-volume-high"}),T("div",null,k(Math.round(((h=e(w).selectedPlayer)==null?void 0:h.group_volume)||0)),1)]}),_:2},1040)]),default:u(()=>[l(Re,{"min-width":"300"},{default:u(()=>[l(te,{style:{overflow:"hidden"},lines:"two"},{default:u(()=>[l(ae,{density:"compact"},{prepend:u(()=>[l(E,{size:"50",icon:e(w).selectedPlayer.group_childs.length>0?"mdi-speaker-multiple":"mdi-speaker",color:"accent",style:{"padding-left":"0px","padding-right":"0px","margin-left":"-10px","margin-right":"10px",width:"42px",height:"50px"}},null,8,["icon"])]),title:u(()=>{var f;return[T("div",Ra,[T("b",null,k((f=e(w).selectedPlayer)==null?void 0:f.display_name.substring(0,25)),1)])]}),subtitle:u(()=>{var f,h;return[(p(),A("div",{key:(f=e(w).selectedPlayer)==null?void 0:f.state,class:"text-body-2",style:{"line-height":"1em"}},k(i.$t("state."+((h=e(w).selectedPlayer)==null?void 0:h.state))),1))]}),default:u(()=>[l(B,{variant:"plain",style:{position:"absolute",right:"0px",top:"0px"},icon:"mdi-close",dark:"",onClick:m[10]||(m[10]=f=>o.value=!o.value)})]),_:1}),l(K),e(w).selectedPlayer?(p(),S(Ge,{key:0,player:e(w).selectedPlayer},null,8,["player"])):$("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):$("",!0),e(n)?(p(),S(B,{key:2,text:"",icon:"",variant:"plain",class:"mediacontrols-right",height:"50",width:"70",onClick:m[12]||(m[12]=f=>i.$router.push("/playerqueue/"))},{default:u(()=>[l(E,{icon:"mdi-playlist-music"}),T("div",null,k(i.$t("queue")),1)]),_:1})):$("",!0)])]}),_:1}))}});const Ma=Bt(Pa,[["__scopeId","data-v-80523bbd"]]),Ba={class:"text-subtitle-1"},Ea=F({__name:"PlayerSelect",setup(t){const c=M(void 0),s=C(()=>{var v,i;const d=[];for(const m in(v=b)==null?void 0:v.players){const _=(i=b)==null?void 0:i.players[m];r(_,!0)&&d.push(_)}return d.slice().sort((m,_)=>{var x;return m.display_name.toUpperCase()>((x=_.display_name)==null?void 0:x.toUpperCase())?1:-1})});H(()=>w.showPlayersMenu,d=>{d||(c.value=void 0)}),H(()=>w.selectedPlayer,d=>{d&&localStorage.setItem("mass.LastPlayerId",d.player_id)}),H(()=>b.players,d=>{d&&g()},{deep:!0});const o=M(),n=M();re(()=>{var d,v,i;o.value=(i=(v=(d=lt())==null?void 0:d.vnode)==null?void 0:v.el)==null?void 0:i.getRootNode(),g()});const a=function(d){n.value!=d&&(n.value=d,setTimeout(()=>{var i;const v=(i=o.value)==null?void 0:i.getElementById(d);v==null||v.scrollIntoView({behavior:"smooth"})},0))},r=function(d,v=!0,i=!1,m=!1){return!(!d.enabled||!d.available&&!v||d.synced_to&&!i||d.hidden_by.length&&!m)},g=function(){if(w.selectedPlayer&&r(w.selectedPlayer,!1,!1,!1))return;const d=y();d&&(w.selectedPlayer=d,console.log("Selected new default player: ",d.display_name))},y=function(){var v,i,m,_;const d=localStorage.getItem("mass.LastPlayerId");if(d&&d in b.players&&r(b.players[d],!1,!1,!1))return b.players[d];if((v=b)!=null&&v.players){for(const x in(i=b)==null?void 0:i.players){const R=b.players[x];if(R.state==De.PLAYING)return R}for(const x in(m=b)==null?void 0:m.queues){const R=b.queues[x];if(r(b.players[x],!1,!1,!1)&&R.items)return b.players[x]}for(const x in(_=b)==null?void 0:_.queues)if(r(b.players[x],!1,!1,!1))return b.players[x]}};return(d,v)=>(p(),S(Fe,{modelValue:e(w).showPlayersMenu,"onUpdate:modelValue":v[2]||(v[2]=i=>e(w).showPlayersMenu=i),location:"right",app:"",clipped:"",temporary:"",touchless:"",width:"300",style:{"z-index":"9999"}},{default:u(()=>[l(Rt,{class:"headline"},{default:u(()=>[T("b",null,k(d.$t("players")),1)]),_:1}),l(B,{variant:"plain",style:{position:"absolute",right:"-10px",top:"0px"},icon:"mdi-close",dark:"",text:"",onClick:v[0]||(v[0]=i=>e(w).showPlayersMenu=!e(w).showPlayersMenu)}),l(K),l(Ct,{modelValue:c.value,"onUpdate:modelValue":v[1]||(v[1]=i=>c.value=i),focusable:"",accordion:"",flat:""},{default:u(()=>[(p(!0),A(ee,null,ie(e(s),i=>(p(),S(Vt,{id:i.player_id,key:i.player_id,disabled:!i.available,flat:""},{default:u(()=>{var m;return[l(Tt,{class:"playerrow",style:X(((m=e(w).selectedPlayer)==null?void 0:m.player_id)==i.player_id?"padding:0;background-color:rgba(50, 115, 220, 0.2);":"padding:0"),"expand-icon":"mdi-chevron-down","collapse-icon":"mdi-chevron-up",onClick:_=>{e(w).selectedPlayer=i,a(i.player_id)}},{default:u(()=>[l(ae,{density:"compact"},{prepend:u(()=>[l(E,{size:"50",icon:i.group_childs.length>0?"mdi-speaker-multiple":"mdi-speaker",color:"accent",style:{"padding-left":"0px","padding-right":"0px","margin-left":"-10px","margin-right":"10px",width:"42px",height:"50px"}},null,8,["icon"])]),title:u(()=>[T("div",Ba,[T("b",null,k(e(_e)(i)),1)])]),subtitle:u(()=>[(p(),A("div",{key:i.state,class:"text-body-2",style:{"line-height":"1em"}},k(d.$t("state."+i.state)),1))]),_:2},1024)]),_:2},1032,["style","onClick"]),l(St,{variant:"contain"},{default:u(()=>[l(Ge,{player:i},null,8,["player"])]),_:2},1024)]}),_:2},1032,["id","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}});function Ia(t={}){const{immediate:c=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:a,onRegisterError:r}=t;let g,y,d;const v=async(m=!0)=>{await y,await(d==null?void 0:d())};async function i(){if("serviceWorker"in navigator){const{Workbox:m}=await ot(()=>import("./workbox-window.prod.es5-dc90f814.js"),[],import.meta.url);g=new m("./sw.js",{scope:"./",type:"classic"}),d=async()=>{await(g==null?void 0:g.messageSkipWaiting())};{let _=!1;const x=()=>{_=!0,g==null||g.addEventListener("controlling",R=>{R.isUpdate&&window.location.reload()}),s==null||s()};g.addEventListener("installed",R=>{typeof R.isUpdate>"u"?typeof R.isExternal<"u"?R.isExternal?x():!_&&(o==null||o()):R.isExternal?window.location.reload():!_&&(o==null||o()):R.isUpdate||o==null||o()}),g.addEventListener("waiting",x),g.addEventListener("externalwaiting",x)}g.register({immediate:c}).then(_=>{a?a("./sw.js",_):n==null||n(_)}).catch(_=>{r==null||r(_)})}}return y=i(),v}function Na(t={}){const{immediate:c=!0,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:a,onRegisterError:r}=t,g=M(!1),y=M(!1);return{updateServiceWorker:Ia({immediate:c,onNeedRefresh(){g.value=!0,s==null||s()},onOfflineReady(){y.value=!0,o==null||o()},onRegistered:n,onRegisteredSW:a,onRegisterError:r}),offlineReady:y,needRefresh:g}}const za={key:0,class:"pwa-toast",role:"alert"},La={class:"message"},Da={key:0},Oa={key:1},qa=F({__name:"ReloadPrompt",setup(t){const{offlineReady:c,needRefresh:s,updateServiceWorker:o}=Na(),n=async()=>{c.value=!1,s.value=!1};return(a,r)=>e(c)||e(s)?(p(),A("div",za,[T("div",La,[e(c)?(p(),A("span",Da," App ready to work offline ")):(p(),A("span",Oa," New content available, click on reload button to update. "))]),e(s)?(p(),A("button",{key:0,onClick:r[0]||(r[0]=g=>e(o)())}," Reload ")):$("",!0),T("button",{onClick:n}," Close ")])):$("",!0)}});const Wa=G()({name:"VApp",props:{..._t({fullHeight:!0}),...fe()},setup(t,c){let{slots:s}=c;const o=ye(t),{layoutClasses:n,layoutStyles:a,getLayoutItem:r,items:g,layoutRef:y}=bt(t),{rtlClasses:d}=ze();return Q(()=>{var v;return l("div",{ref:y,class:["v-application",o.themeClasses.value,n.value,d.value],style:a.value},[l("div",{class:"v-application__wrap"},[(v=s.default)==null?void 0:v.call(s)])])}),{getLayoutItem:r,items:g,theme:o}}}),on=F({__name:"Default",setup(t){return(c,s)=>(p(),S(Wa,null,{default:u(()=>[l(Ea),l(qt),l(Ma),e(b).state.value==e(st).CONNECTED?(p(),S(Jt,{key:0})):(p(),S(mt,{key:1},{default:u(()=>[l(Oe,{indeterminate:"",size:"64"})]),_:1})),e(w).isInStandaloneMode?(p(),S(qa,{key:2})):$("",!0)]),_:1}))}});export{on as default};
