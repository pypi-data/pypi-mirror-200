import{P as h,d,r as p,a7 as m,c as l,z as v,h as y,i as $,w as k,l as M,b as T,M as _,k as U,Q as c,n as S}from"./index-1c74b571.js";import{b as B}from"./VBtn-306d1a5a.js";import{b as x}from"./VCardText-075e2ead.js";const V=t=>t==null||!t?!1:typeof t=="boolean"?t:!!JSON.parse(String(t).toLowerCase()),j=function(t){t=Math.floor(t);const a=Math.floor(t/3600),i=Math.floor((t-a*3600)/60),n=t-a*3600-i*60;let e=a.toString(),r=i.toString(),u=n.toString();return a<10&&(e="0"+a),i<10&&(r="0"+i),n<10&&(u="0"+n),e==="00"?r+":"+u:e+":"+r+":"+u},g=function(t,a){return t?t.length<=a?t:t.slice(0,a)+"...":""},D=function(t){return t?t.map(a=>a.name).join(" / "):""},O=function(t,a){let i="";return t!=null&&t.name&&(t!=null&&t.label)?i=`${t.name}: ${a(t==null?void 0:t.label)}`:t!=null&&t.name?i=t.name:t!=null&&t.label?i=a(t==null?void 0:t.label):i=t.path||"",i},q=function(t,a=26){return t?t.type!=h.GROUP&&t.group_childs.length>0?`${g(t.display_name,a-3)} +${t.group_childs.length}`:g(t.display_name,a):""},C={class:"d-flex align-center justify-center fill-height"},N=function(t,a=c.THUMB,i=!1){if(t){if("metadata"in t&&t.metadata.images){for(const n of t.metadata.images)if(!(n.provider=="http"&&!i)&&n.type==a)return n}if("album"in t&&t.album&&"metadata"in t.album&&t.album.metadata&&t.album.metadata.images){for(const n of t.album.metadata.images)if(!(n.provider=="http"&&!i)&&n.type==a)return n}if("artist"in t&&"metadata"in t.artist&&t.artist.metadata&&t.artist.metadata.images){for(const n of t.artist.metadata.images)if(!(n.provider=="http"&&!i)&&n.type==a)return n}if("artists"in t&&t.artists){for(const n of t.artists)if("metadata"in n&&n.metadata.images){for(const e of n.metadata.images)if(!(e.provider=="http"&&!i)&&e.type==a)return e}}}},P=async function(t,a=c.THUMB,i){var e;if(!t)return;let n="";if("image_url"in t&&t.image_url)n=t.image_url;else{const r=N(t,a,!0);if(!r)return;if(r.provider!=="url"){const u=encodeURIComponent(encodeURIComponent(r.path)),o="metadata"in t?(e=t.metadata)==null?void 0:e.checksum:"";return`${S.baseUrl}/imageproxy?size=${i||0}&path=${u}&provider=${r.provider}&checksum=${o}`}n=r.path}return i?`https://images.weserv.nl/?url=${n}&w=${i}&h=${i}&fit=cover&a=attention`:n},A=d({__name:"MediaItemThumb",props:{item:{default:void 0},width:{default:"100%"},height:{default:"auto"},aspectRatio:{default:"1/1"},cover:{type:Boolean,default:!0},fallback:{default:void 0},thumb:{type:Boolean,default:!0}},setup(t){const a=t,i=p(),n=m(),e=l(()=>a.fallback?a.fallback:a.item?n.current.value.dark?`https://ui-avatars.com/api/?name=${a.item.name}&size=${r.value||256}&bold=true&background=1d1d1d&color=383838`:`https://ui-avatars.com/api/?name=${a.item.name}&size=${r.value||256}&bold=true&background=a0a0a0&color=cccccc`:""),r=l(()=>typeof a.width=="number"?a.width:a.thumb?256:0);return v(()=>a.item,async u=>{u&&(i.value=await P(u,c.THUMB,r.value)||e.value)},{immediate:!0}),(u,o)=>{var f,s;return y(),$(x,{key:"uri"in t.item?(f=t.item)==null?void 0:f.uri:(s=t.item)==null?void 0:s.queue_item_id,style:_(`height:${t.height};`),cover:t.cover,src:i.value,width:t.width,"aspect-ratio":t.aspectRatio,onError:o[0]||(o[0]=()=>{i.value=U(e)})},{placeholder:k(()=>[M("div",C,[T(B,{indeterminate:""})])]),_:1},8,["style","cover","src","width","aspect-ratio"])}}});export{A as _,D as a,P as b,O as c,j as f,q as g,V as p,g as t};
